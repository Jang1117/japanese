<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            font-size: 28px;
            flex: 1;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }

        .back-button {
            background: #e9ecef;
            border: none;
            border-radius: 10px;
            padding: 10px ;
            
            cursor: pointer;
            font-size: 18px;
            margin-right: 15px;
            transition: all 0.3s;
        }

        .back-button:hover {
            background: #dee2e6;
            transform: translateX(-3px);
        }

        .character-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .current-character {
            font-size: 80px;
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .character-info {
            font-size: 18px;
            color: #666;
        }

        .canvas-container {
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #e0e0e0;
            overflow: hidden;
        }

        #drawingCanvas {
            display: block;
            width: 100%;
            height: 300px;
            cursor: crosshair;
            touch-action: none;
        }

        .guide-canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-clear {
            background: #ff6b6b;
            color: white;
        }

        .btn-clear:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .btn-next {
            background: #51cf66;
            color: white;
        }

        .btn-next:hover {
            background: #40c057;
            transform: translateY(-2px);
        }

        .btn-show-guide {
            background: #ffd43b;
            color: #333;
        }

        .btn-show-guide:hover {
            background: #fcc419;
            transform: translateY(-2px);
        }

        .progress {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .category-selector {
            display: flex;
            gap: 6px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-btn {
            flex: 1 1 calc(16.666% - 6px);
            min-width: 65px;
            padding: 8px 4px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            font-size: 13px;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .stroke-order {
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: #e7f5ff;
            border-radius: 8px;
            font-size: 14px;
            color: #1864ab;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-button" onclick="goBack()">â†</button>
            <h1>ğŸ‡¯ğŸ‡µ íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</h1>
        </div>
        
        <div class="category-selector">
            <button class="category-btn active" onclick="selectCategory('basic')">ã‚í–‰</button>
            <button class="category-btn" onclick="selectCategory('ka')">ã‹í–‰</button>
            <button class="category-btn" onclick="selectCategory('sa')">ã•í–‰</button>
            <button class="category-btn" onclick="selectCategory('ta')">ãŸí–‰</button>
            <button class="category-btn" onclick="selectCategory('na')">ãªí–‰</button>
            <button class="category-btn" onclick="selectCategory('ha')">ã¯í–‰</button>
            <button class="category-btn" onclick="selectCategory('ma')">ã¾í–‰</button>
            <button class="category-btn" onclick="selectCategory('ya')">ã‚„í–‰</button>
            <button class="category-btn" onclick="selectCategory('ra')">ã‚‰í–‰</button>
            <button class="category-btn" onclick="selectCategory('wa')">ã‚í–‰</button>
            <button class="category-btn" onclick="selectCategory('ga')">íƒìŒ ãŒ</button>
            <button class="category-btn" onclick="selectCategory('za')">íƒìŒ ã–</button>
            <button class="category-btn" onclick="selectCategory('da')">íƒìŒ ã </button>
            <button class="category-btn" onclick="selectCategory('ba')">íƒìŒ ã°</button>
            <button class="category-btn" onclick="selectCategory('pa')">ë°˜íƒìŒ ã±</button>
            <button class="category-btn" onclick="selectCategory('kya')">ìš”ìŒ ãã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('sha')">ìš”ìŒ ã—ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('cha')">ìš”ìŒ ã¡ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('nya')">ìš”ìŒ ã«ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('hya')">ìš”ìŒ ã²ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('mya')">ìš”ìŒ ã¿ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('rya')">ìš”ìŒ ã‚Šã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('gya')">ìš”ìŒ ãã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('ja')">ìš”ìŒ ã˜ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('bya')">ìš”ìŒ ã³ã‚ƒ</button>
            <button class="category-btn" onclick="selectCategory('pya')">ìš”ìŒ ã´ã‚ƒ</button>
        </div>

        <div class="progress">
            <span id="progressText">1 / 5</span>
        </div>

        <div class="character-display">
            <div class="current-character" id="currentCharacter">ã‚</div>
            <div class="character-info" id="characterInfo">a (ì•„)</div>
        </div>

        <div class="canvas-container">
            <canvas id="guideCanvas" class="guide-canvas"></canvas>
            <canvas id="drawingCanvas"></canvas>
        </div>

        <div class="stroke-order" id="strokeOrder">
            íšìˆœ: ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ, ìœ„ì—ì„œ ì•„ë˜ë¡œ
        </div>

        <div class="controls">
            <button class="btn-clear" onclick="clearCanvas()">ì§€ìš°ê¸°</button>
            <button class="btn-show-guide" onclick="toggleGuide()">ê°€ì´ë“œ</button>
            <button class="btn-next" onclick="nextCharacter()">ë‹¤ìŒ</button>
        </div>
    </div>

    <script>
        const hiraganaData = {
            basic: [
                { char: 'ã‚', romaji: 'a', korean: 'ì•„', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì˜¤ë¥¸ìª½ ì„¸ë¡œ+ê³¡ì„  íš â†’ â‘¢ ì™¼ìª½ ê³¡ì„  íš', 
                  strokeOrder: [[0.25, 0.25, 0.65, 0.28], [0.55, 0.25, 0.58, 0.75], [0.28, 0.45, 0.42, 0.78]] },
                { char: 'ã„', romaji: 'i', korean: 'ì´', strokes: '2íš: â‘  ì™¼ìª½ ì„¸ë¡œ íš â†’ â‘¡ ì˜¤ë¥¸ìª½ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.38, 0.28, 0.35, 0.72], [0.62, 0.23, 0.65, 0.75]] },
                { char: 'ã†', romaji: 'u', korean: 'ìš°', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.30, 0.35, 0.55, 0.35], [0.40, 0.50, 0.60, 0.72]] },
                { char: 'ãˆ', romaji: 'e', korean: 'ì—', strokes: '2íš: â‘  ìœ„ì—ì„œ ì•„ë˜ë¡œ ê³¡ì„  íš â†’ â‘¡ ì•„ë˜ ê°€ë¡œ íš', 
                  strokeOrder: [[0.30, 0.32, 0.62, 0.58], [0.32, 0.68, 0.68, 0.68]] },
                { char: 'ãŠ', romaji: 'o', korean: 'ì˜¤', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì„¸ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.28], [0.45, 0.28, 0.45, 0.48], [0.32, 0.52, 0.62, 0.75]] }
            ],
            ka: [
                { char: 'ã‹', romaji: 'ka', korean: 'ì¹´', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì„¸ë¡œ íš â†’ â‘¢ ì˜¤ë¥¸ìª½ ì‚¬ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.58, 0.32], [0.42, 0.32, 0.42, 0.72], [0.55, 0.48, 0.65, 0.75]] },
                { char: 'ã', romaji: 'ki', korean: 'í‚¤', strokes: '4íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì™¼ìª½ ì„¸ë¡œ íš â†’ â‘¢ ì˜¤ë¥¸ìª½ ìœ„ ì‚¬ì„  â†’ â‘£ ì˜¤ë¥¸ìª½ ì•„ë˜ ì‚¬ì„ ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48], [0.50, 0.55, 0.68, 0.68]] },
                { char: 'ã', romaji: 'ku', korean: 'ì¿ ', strokes: '1íš: â‘  ìœ„ì—ì„œ ì•„ë˜ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.65, 0.68]] },
                { char: 'ã‘', romaji: 'ke', korean: 'ì¼€', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì„¸ë¡œ íš â†’ â‘¢ ì˜¤ë¥¸ìª½ ì‚¬ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.55, 0.32], [0.38, 0.32, 0.38, 0.72], [0.50, 0.48, 0.68, 0.68]] },
                { char: 'ã“', romaji: 'ko', korean: 'ì½”', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê°€ë¡œ íš', 
                  strokeOrder: [[0.32, 0.35, 0.62, 0.35], [0.38, 0.52, 0.65, 0.65]] }
            ],
            sa: [
                { char: 'ã•', romaji: 'sa', korean: 'ì‚¬', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.32], [0.38, 0.45, 0.58, 0.48], [0.35, 0.60, 0.65, 0.75]] },
                { char: 'ã—', romaji: 'shi', korean: 'ì‹œ', strokes: '1íš: â‘  ìœ„ì—ì„œ ì•„ë˜ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ã™', romaji: 'su', korean: 'ìŠ¤', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.35, 0.58, 0.38], [0.38, 0.50, 0.65, 0.72]] },
                { char: 'ã›', romaji: 'se', korean: 'ì„¸', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.58, 0.32], [0.32, 0.48, 0.65, 0.52], [0.38, 0.65, 0.65, 0.75]] },
                { char: 'ã', romaji: 'so', korean: 'ì†Œ', strokes: '1íš: â‘  ìœ„ì—ì„œ ì•„ë˜ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.65, 0.72]] }
            ],
            ta: [
                { char: 'ãŸ', romaji: 'ta', korean: 'íƒ€', strokes: '4íš: â‘  ë§¨ ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì„¸ë¡œ íš â†’ â‘¢ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘£ ì•„ë˜ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.28], [0.45, 0.28, 0.45, 0.48], [0.32, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã¡', romaji: 'chi', korean: 'ì¹˜', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.45, 0.62, 0.75]] },
                { char: 'ã¤', romaji: 'tsu', korean: 'ì¸ ', strokes: '1íš: â‘  ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.68]] },
                { char: 'ã¦', romaji: 'te', korean: 'í…Œ', strokes: '1íš: â‘  ì™¼ìª½ ìœ„ì—ì„œ ì˜¤ë¥¸ìª½ ì•„ë˜ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.65, 0.72]] },
                { char: 'ã¨', romaji: 'to', korean: 'í† ', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.48, 0.65, 0.72]] }
            ],
            na: [
                { char: 'ãª', romaji: 'na', korean: 'ë‚˜', strokes: '4íš: â‘  ë§¨ ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì™¼ìª½ ì„¸ë¡œ íš â†’ â‘¢ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘£ ì˜¤ë¥¸ìª½ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.28, 0.28, 0.58, 0.28], [0.42, 0.28, 0.42, 0.48], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã«', romaji: 'ni', korean: 'ë‹ˆ', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê°€ë¡œ íš â†’ â‘¢ ì˜¤ë¥¸ìª½ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã¬', romaji: 'nu', korean: 'ëˆ„', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã­', romaji: 'ne', korean: 'ë„¤', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.52, 0.38], [0.35, 0.48, 0.65, 0.75]] },
                { char: 'ã®', romaji: 'no', korean: 'ë…¸', strokes: '1íš: â‘  ë‚˜ì„ í˜• ê³¡ì„  íš (í•œ ë¶“ ê·¸ë¦¬ê¸°)', 
                  strokeOrder: [[0.32, 0.28, 0.65, 0.72]] }
            ],
            ha: [
                { char: 'ã¯', romaji: 'ha', korean: 'í•˜', strokes: '3íš: â‘  ì™¼ìª½ ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì™¼ìª½ ì„¸ë¡œ íš â†’ â‘¢ ì˜¤ë¥¸ìª½ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.32, 0.38, 0.72], [0.52, 0.38, 0.68, 0.75]] },
                { char: 'ã²', romaji: 'hi', korean: 'íˆ', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ãµ', romaji: 'fu', korean: 'í›„', strokes: '4íš: â‘  ì™¼ìª½ ìœ„ ì  â†’ â‘¡ ìœ„ ê°€ë¡œ íš â†’ â‘¢ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘£ ì•„ë˜ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.28, 0.28, 0.42, 0.32], [0.32, 0.38, 0.58, 0.42], [0.48, 0.48, 0.65, 0.58], [0.42, 0.65, 0.58, 0.75]] },
                { char: 'ã¸', romaji: 'he', korean: 'í—¤', strokes: '1íš: â‘  ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ì‚¬ì„  íš', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.62]] },
                { char: 'ã»', romaji: 'ho', korean: 'í˜¸', strokes: '4íš: â‘  ë§¨ ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì™¼ìª½ ì„¸ë¡œ íš â†’ â‘¢ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘£ ì˜¤ë¥¸ìª½ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.28, 0.28, 0.55, 0.28], [0.42, 0.28, 0.42, 0.48], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] }
            ],
            ma: [
                { char: 'ã¾', romaji: 'ma', korean: 'ë§ˆ', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì„¸ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.28], [0.45, 0.28, 0.45, 0.48], [0.32, 0.52, 0.65, 0.75]] },
                { char: 'ã¿', romaji: 'mi', korean: 'ë¯¸', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã‚€', romaji: 'mu', korean: 'ë¬´', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.28, 0.42, 0.65, 0.48], [0.42, 0.55, 0.58, 0.75]] },
                { char: 'ã‚', romaji: 'me', korean: 'ë©”', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã‚‚', romaji: 'mo', korean: 'ëª¨', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.28, 0.48, 0.65, 0.52], [0.42, 0.60, 0.52, 0.75]] }
            ],
            ya: [
                { char: 'ã‚„', romaji: 'ya', korean: 'ì•¼', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.32], [0.38, 0.48, 0.58, 0.52], [0.35, 0.65, 0.65, 0.75]] },
                { char: 'ã‚†', romaji: 'yu', korean: 'ìœ ', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.52, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã‚ˆ', romaji: 'yo', korean: 'ìš”', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.62, 0.38], [0.38, 0.52, 0.65, 0.75]] }
            ],
            ra: [
                { char: 'ã‚‰', romaji: 'ra', korean: 'ë¼', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.75]] },
                { char: 'ã‚Š', romaji: 'ri', korean: 'ë¦¬', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.75]] },
                { char: 'ã‚‹', romaji: 'ru', korean: 'ë£¨', strokes: '1íš: â‘  ìœ„ì—ì„œ ì•„ë˜ë¡œ ë‚˜ì„ í˜• ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.32, 0.65, 0.75]] },
                { char: 'ã‚Œ', romaji: 're', korean: 'ë ˆ', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã‚', romaji: 'ro', korean: 'ë¡œ', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ì„¸ë¡œ íš', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.28], [0.28, 0.42, 0.65, 0.48], [0.42, 0.55, 0.52, 0.75]] }
            ],
            wa: [
                { char: 'ã‚', romaji: 'wa', korean: 'ì™€', strokes: '2íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.32, 0.62, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã‚’', romaji: 'wo/o', korean: 'ì˜¤(ì¡°ì‚¬)', strokes: '3íš: â‘  ìœ„ ê°€ë¡œ íš â†’ â‘¡ ì¤‘ê°„ ê°€ë¡œ íš â†’ â‘¢ ì•„ë˜ ê³¡ì„  íš', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.32], [0.38, 0.48, 0.58, 0.52], [0.35, 0.65, 0.65, 0.75]] },
                { char: 'ã‚“', romaji: 'n', korean: 'ì‘', strokes: '1íš: â‘  ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ê³¡ì„  íš', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.72]] }
            ],
            // íƒìŒ (Dakuten)
            ga: [
                { char: 'ãŒ', romaji: 'ga', korean: 'ê°€', strokes: '3íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.58, 0.32], [0.42, 0.32, 0.42, 0.72], [0.55, 0.48, 0.65, 0.75]] },
                { char: 'ã', romaji: 'gi', korean: 'ê¸°', strokes: '4íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48], [0.50, 0.55, 0.68, 0.68]] },
                { char: 'ã', romaji: 'gu', korean: 'êµ¬', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.32, 0.32, 0.65, 0.68]] },
                { char: 'ã’', romaji: 'ge', korean: 'ê²Œ', strokes: '3íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.55, 0.32], [0.38, 0.32, 0.38, 0.72], [0.50, 0.48, 0.68, 0.68]] },
                { char: 'ã”', romaji: 'go', korean: 'ê³ ', strokes: '2íš + íƒì ', 
                  strokeOrder: [[0.32, 0.35, 0.62, 0.35], [0.38, 0.52, 0.65, 0.65]] }
            ],
            za: [
                { char: 'ã–', romaji: 'za', korean: 'ì', strokes: '3íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.32], [0.38, 0.45, 0.58, 0.48], [0.35, 0.60, 0.65, 0.75]] },
                { char: 'ã˜', romaji: 'ji', korean: 'ì§€', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ãš', romaji: 'zu', korean: 'ì¦ˆ', strokes: '2íš + íƒì ', 
                  strokeOrder: [[0.28, 0.35, 0.58, 0.38], [0.38, 0.50, 0.65, 0.72]] },
                { char: 'ãœ', romaji: 'ze', korean: 'ì œ', strokes: '3íš + íƒì ', 
                  strokeOrder: [[0.28, 0.32, 0.58, 0.32], [0.32, 0.48, 0.65, 0.52], [0.38, 0.65, 0.65, 0.75]] },
                { char: 'ã', romaji: 'zo', korean: 'ì¡°', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.65, 0.72]] }
            ],
            da: [
                { char: 'ã ', romaji: 'da', korean: 'ë‹¤', strokes: '4íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.62, 0.28], [0.45, 0.28, 0.45, 0.48], [0.32, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã¢', romaji: 'ji', korean: 'ì§€', strokes: '2íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.45, 0.62, 0.75]] },
                { char: 'ã¥', romaji: 'zu', korean: 'ì¦ˆ', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.68]] },
                { char: 'ã§', romaji: 'de', korean: 'ë°', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.32, 0.32, 0.65, 0.72]] },
                { char: 'ã©', romaji: 'do', korean: 'ë„', strokes: '2íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.48, 0.65, 0.72]] }
            ],
            ba: [
                { char: 'ã°', romaji: 'ba', korean: 'ë°”', strokes: '3íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.32, 0.38, 0.72], [0.52, 0.38, 0.68, 0.75]] },
                { char: 'ã³', romaji: 'bi', korean: 'ë¹„', strokes: '2íš + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã¶', romaji: 'bu', korean: 'ë¶€', strokes: '4íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.42, 0.32], [0.32, 0.38, 0.58, 0.42], [0.48, 0.48, 0.65, 0.58], [0.42, 0.65, 0.58, 0.75]] },
                { char: 'ã¹', romaji: 'be', korean: 'ë² ', strokes: '1íš + íƒì ', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.62]] },
                { char: 'ã¼', romaji: 'bo', korean: 'ë³´', strokes: '4íš + íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.55, 0.28], [0.42, 0.28, 0.42, 0.48], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] }
            ],
            // ë°˜íƒìŒ (Handakuten)
            pa: [
                { char: 'ã±', romaji: 'pa', korean: 'íŒŒ', strokes: '3íš + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.32, 0.38, 0.72], [0.52, 0.38, 0.68, 0.75]] },
                { char: 'ã´', romaji: 'pi', korean: 'í”¼', strokes: '2íš + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã·', romaji: 'pu', korean: 'í‘¸', strokes: '4íš + ë°˜íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.42, 0.32], [0.32, 0.38, 0.58, 0.42], [0.48, 0.48, 0.65, 0.58], [0.42, 0.65, 0.58, 0.75]] },
                { char: 'ãº', romaji: 'pe', korean: 'í˜', strokes: '1íš + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.42, 0.65, 0.62]] },
                { char: 'ã½', romaji: 'po', korean: 'í¬', strokes: '4íš + ë°˜íƒì ', 
                  strokeOrder: [[0.28, 0.28, 0.55, 0.28], [0.42, 0.28, 0.42, 0.48], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] }
            ],
            // ìš”ìŒ (Yoon)
            kya: [
                { char: 'ãã‚ƒ', romaji: 'kya', korean: 'ì± ', strokes: 'ã + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] },
                { char: 'ãã‚…', romaji: 'kyu', korean: 'í', strokes: 'ã + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] },
                { char: 'ãã‚‡', romaji: 'kyo', korean: 'ì¿„', strokes: 'ã + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] }
            ],
            sha: [
                { char: 'ã—ã‚ƒ', romaji: 'sha', korean: 'ìƒ¤', strokes: 'ã— + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ã—ã‚…', romaji: 'shu', korean: 'ìŠˆ', strokes: 'ã— + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ã—ã‚‡', romaji: 'sho', korean: 'ì‡¼', strokes: 'ã— + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] }
            ],
            cha: [
                { char: 'ã¡ã‚ƒ', romaji: 'cha', korean: 'ì°¨', strokes: 'ã¡ + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.45, 0.62, 0.75]] },
                { char: 'ã¡ã‚…', romaji: 'chu', korean: 'ì¶”', strokes: 'ã¡ + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.45, 0.62, 0.75]] },
                { char: 'ã¡ã‚‡', romaji: 'cho', korean: 'ì´ˆ', strokes: 'ã¡ + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.28, 0.58, 0.32], [0.38, 0.45, 0.62, 0.75]] }
            ],
            nya: [
                { char: 'ã«ã‚ƒ', romaji: 'nya', korean: 'ëƒ', strokes: 'ã« + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã«ã‚…', romaji: 'nyu', korean: 'ë‰´', strokes: 'ã« + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] },
                { char: 'ã«ã‚‡', romaji: 'nyo', korean: 'ë‡¨', strokes: 'ã« + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.28, 0.55, 0.65, 0.60], [0.48, 0.60, 0.48, 0.75]] }
            ],
            hya: [
                { char: 'ã²ã‚ƒ', romaji: 'hya', korean: 'í–', strokes: 'ã² + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã²ã‚…', romaji: 'hyu', korean: 'íœ´', strokes: 'ã² + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã²ã‚‡', romaji: 'hyo', korean: 'íš¨', strokes: 'ã² + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] }
            ],
            mya: [
                { char: 'ã¿ã‚ƒ', romaji: 'mya', korean: 'ë¨€', strokes: 'ã¿ + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã¿ã‚…', romaji: 'myu', korean: 'ë®¤', strokes: 'ã¿ + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] },
                { char: 'ã¿ã‚‡', romaji: 'myo', korean: 'ë¬˜', strokes: 'ã¿ + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.32, 0.58, 0.38], [0.38, 0.48, 0.65, 0.75]] }
            ],
            rya: [
                { char: 'ã‚Šã‚ƒ', romaji: 'rya', korean: 'ë´', strokes: 'ã‚Š + ì‘ì€ ã‚ƒ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.75]] },
                { char: 'ã‚Šã‚…', romaji: 'ryu', korean: 'ë¥˜', strokes: 'ã‚Š + ì‘ì€ ã‚…', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.75]] },
                { char: 'ã‚Šã‚‡', romaji: 'ryo', korean: 'ë£Œ', strokes: 'ã‚Š + ì‘ì€ ã‚‡', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.75]] }
            ],
            gya: [
                { char: 'ãã‚ƒ', romaji: 'gya', korean: 'ê°¸', strokes: 'ã + ì‘ì€ ã‚ƒ + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] },
                { char: 'ãã‚…', romaji: 'gyu', korean: 'ê·œ', strokes: 'ã + ì‘ì€ ã‚… + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] },
                { char: 'ãã‚‡', romaji: 'gyo', korean: 'êµ', strokes: 'ã + ì‘ì€ ã‚‡ + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.48, 0.28], [0.38, 0.28, 0.38, 0.72], [0.50, 0.38, 0.68, 0.48]] }
            ],
            ja: [
                { char: 'ã˜ã‚ƒ', romaji: 'ja', korean: 'ì', strokes: 'ã˜ + ì‘ì€ ã‚ƒ + íƒì ', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ã˜ã‚…', romaji: 'ju', korean: 'ì£¼', strokes: 'ã˜ + ì‘ì€ ã‚… + íƒì ', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] },
                { char: 'ã˜ã‚‡', romaji: 'jo', korean: 'ì¡°', strokes: 'ã˜ + ì‘ì€ ã‚‡ + íƒì ', 
                  strokeOrder: [[0.38, 0.28, 0.58, 0.75]] }
            ],
            bya: [
                { char: 'ã³ã‚ƒ', romaji: 'bya', korean: 'ë±Œ', strokes: 'ã³ + ì‘ì€ ã‚ƒ + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã³ã‚…', romaji: 'byu', korean: 'ë·°', strokes: 'ã³ + ì‘ì€ ã‚… + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã³ã‚‡', romaji: 'byo', korean: 'ëµ¤', strokes: 'ã³ + ì‘ì€ ã‚‡ + íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] }
            ],
            pya: [
                { char: 'ã´ã‚ƒ', romaji: 'pya', korean: 'í„', strokes: 'ã´ + ì‘ì€ ã‚ƒ + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã´ã‚…', romaji: 'pyu', korean: 'í“¨', strokes: 'ã´ + ì‘ì€ ã‚… + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] },
                { char: 'ã´ã‚‡', romaji: 'pyo', korean: 'í‘œ', strokes: 'ã´ + ì‘ì€ ã‚‡ + ë°˜íƒì ', 
                  strokeOrder: [[0.32, 0.28, 0.52, 0.32], [0.38, 0.42, 0.65, 0.72]] }
            ]
        };

        let currentCategory = 'basic';
        let currentIndex = 0;
        let isDrawing = false;
        let showGuide = false;

        const canvas = document.getElementById('drawingCanvas');
        const guideCanvas = document.getElementById('guideCanvas');
        const ctx = canvas.getContext('2d');
        const guideCtx = guideCanvas.getContext('2d');

        function initCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            
            canvas.width = rect.width;
            canvas.height = 300;
            guideCanvas.width = rect.width;
            guideCanvas.height = 300;

            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#667eea';

            drawGuideCharacter();
        }

        function drawGuideCharacter() {
            const currentChar = hiraganaData[currentCategory][currentIndex];
            guideCtx.clearRect(0, 0, guideCanvas.width, guideCanvas.height);
            
            // Calculate font size to fill 80% of canvas height
            const fontSize = Math.min(guideCanvas.width, guideCanvas.height) * 0.8;
            guideCtx.font = `bold ${fontSize}px sans-serif`;
            guideCtx.fillStyle = '#764ba2';
            guideCtx.textAlign = 'center';
            guideCtx.textBaseline = 'middle';
            guideCtx.fillText(currentChar.char, guideCanvas.width / 2, guideCanvas.height / 2);
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
        }

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function toggleGuide() {
            showGuide = !showGuide;
            guideCanvas.style.opacity = showGuide ? '0.3' : '0';
        }

        function nextCharacter() {
            const categoryData = hiraganaData[currentCategory];
            currentIndex = (currentIndex + 1) % categoryData.length;
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function selectCategory(category) {
            currentCategory = category;
            currentIndex = 0;
            
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function updateDisplay() {
            const currentChar = hiraganaData[currentCategory][currentIndex];
            document.getElementById('currentCharacter').textContent = currentChar.char;
            document.getElementById('characterInfo').textContent = 
                `${currentChar.romaji} (${currentChar.korean})`;
            document.getElementById('strokeOrder').textContent = 
                `íšìˆœ: ${currentChar.strokes}`;
            document.getElementById('progressText').textContent = 
                `${currentIndex + 1} / ${hiraganaData[currentCategory].length}`;
        }

        // Event listeners
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        window.addEventListener('resize', initCanvas);
        
        function goBack() {
            window.location.href = 'index.html';
        }
        
        initCanvas();
        updateDisplay();
    </script>
</body>
</html>
