<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            color: #667eea;
            font-size: 22px;
            flex: 1;
            white-space: nowrap;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .back-button {
            background: #e9ecef;
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-button:hover {
            background: #dee2e6;
            transform: translateX(-3px);
        }

        .chart-button {
            background: linear-gradient(135deg, #ff6b9d 0%, #c44569 100%);
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .chart-button:hover {
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(196, 69, 105, 0.4);
        }

        .character-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .current-character {
            font-size: 80px;
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .character-info {
            font-size: 18px;
            color: #666;
        }

        .canvas-container {
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #e0e0e0;
            overflow: hidden;
        }

        #drawingCanvas {
            display: block;
            width: 100%;
            height: 250px;
            cursor: crosshair;
            touch-action: none;
        }

        .guide-canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0.3;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 14px 10px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .btn-clear {
            background: #ff6b6b;
            color: white;
        }

        .btn-clear:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .btn-next {
            background: #51cf66;
            color: white;
        }

        .btn-next:hover {
            background: #40c057;
            transform: translateY(-2px);
        }

        .btn-prev {
            background: #74c0fc;
            color: white;
        }

        .btn-prev:hover {
            background: #4dabf7;
            transform: translateY(-2px);
        }

        .btn-show-guide {
            background: #ffd43b;
            color: #333;
        }

        .btn-show-guide:hover {
            background: #fcc419;
            transform: translateY(-2px);
        }

        .progress {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .level-btn {
            padding: 12px 10px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .level-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .level-btn:hover {
            transform: translateY(-2px);
        }

        .category-selector {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .category-btn {
            padding: 10px 5px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .stroke-order {
            text-align: center;
            margin-top: 10px;
            padding: 12px;
            background: #e7f5ff;
            border-radius: 8px;
            font-size: 14px;
            color: #1864ab;
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.5;
        }

        /* íŒì—… ëª¨ë‹¬ ìŠ¤íƒ€ì¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
            animation: fadeIn 0.3s ease;
        }

        .modal-overlay.show {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-content {
            background: white;
            border-radius: 20px;
            max-width: 95vw;
            max-height: 90vh;
            overflow: auto;
            position: relative;
            animation: slideUp 0.3s ease;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
        }

        .modal-header {
            position: sticky;
            top: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-radius: 20px 20px 0 0;
            z-index: 10;
        }

        .modal-header h2 {
            font-size: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .modal-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 36px;
            height: 36px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .modal-body {
            padding: 25px;
        }

        /* íˆë¼ê°€ë‚˜ í‘œ ìŠ¤íƒ€ì¼ */
        .hiragana-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .hiragana-table th {
            background: linear-gradient(135deg, #ffeef8 0%, #f8e1eb 100%);
            padding: 10px 6px;
            font-weight: bold;
            color: #764ba2;
            border: 1px solid #e0c4d4;
            font-size: 13px;
        }

        .hiragana-table td {
            padding: 8px 4px;
            text-align: center;
            border: 1px solid #e9ecef;
            vertical-align: middle;
            transition: all 0.2s;
        }

        .hiragana-table td:hover {
            background: #f0e6ff;
            transform: scale(1.05);
        }

        .hiragana-table .row-header {
            background: linear-gradient(135deg, #ffeef8 0%, #f8e1eb 100%);
            font-weight: bold;
            color: #764ba2;
            font-size: 13px;
        }

        .char-cell {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 2px;
        }

        .char-main {
            font-size: 24px;
            color: #333;
            font-weight: 500;
        }

        .char-romaji {
            font-size: 10px;
            color: #888;
        }

        .empty-cell {
            background: #f8f9fa;
            color: #ccc;
        }

        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .table-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .table-tab {
            padding: 10px 20px;
            background: #e9ecef;
            border: none;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            color: #495057;
        }

        .table-tab.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .table-tab:hover {
            transform: translateY(-2px);
        }

        .table-section {
            display: none;
        }

        .table-section.active {
            display: block;
        }

        .section-title {
            font-size: 16px;
            color: #667eea;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9ecef;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ìš”ìŒ í‘œ ìŠ¤íƒ€ì¼ */
        .yoon-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }

        .yoon-table th, .yoon-table td {
            padding: 8px 6px;
            text-align: center;
            border: 1px solid #e9ecef;
        }

        .yoon-table th {
            background: linear-gradient(135deg, #e7f5ff 0%, #d0ebff 100%);
            color: #1864ab;
            font-size: 12px;
        }

        /* í†µí•© í‘œ ìŠ¤íƒ€ì¼ */
        .table-scroll {
            overflow-x: auto;
            margin-bottom: 15px;
        }

        .combined-table {
            min-width: 900px;
        }

        .combined-table th,
        .combined-table td {
            min-width: 55px;
            padding: 6px 4px;
        }

        .dakuon-header {
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%) !important;
            color: #e65100 !important;
        }

        .handakuon-header {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%) !important;
            color: #2e7d32 !important;
        }

        .dakuon-cell {
            background: #fff8e1;
        }

        .handakuon-cell {
            background: #e8f5e9;
        }

        .dakuon-row td {
            background: #fff8e1;
        }

        .handakuon-row td {
            background: #e8f5e9;
        }

        /* ë²”ë¡€ ìŠ¤íƒ€ì¼ */
        .legend {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
            margin-top: 15px;
            padding: 12px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 13px;
            color: #495057;
        }

        .legend-box {
            width: 16px;
            height: 16px;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }

        .seion-box {
            background: white;
        }

        .dakuon-box {
            background: #fff8e1;
        }

        .handakuon-box {
            background: #e8f5e9;
        }

        @media (max-width: 500px) {
            .modal-body {
                padding: 15px;
            }
            
            .char-main {
                font-size: 20px;
            }
            
            .char-romaji {
                font-size: 9px;
            }
            
            .hiragana-table th,
            .hiragana-table td {
                padding: 6px 3px;
            }
            
            .table-tab {
                padding: 8px 14px;
                font-size: 12px;
            }
        }

        @media (max-width: 400px) {
            .container {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 18px;
            }
            
            .current-character {
                font-size: 60px;
            }
            
            .character-info {
                font-size: 16px;
            }
            
            .category-selector {
                grid-template-columns: repeat(5, 1fr);
                gap: 6px;
            }
            
            .category-btn {
                padding: 8px 3px;
                font-size: 14px;
            }
            
            button {
                padding: 12px 8px;
                font-size: 14px;
            }
            
            .stroke-order {
                font-size: 13px;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-button" onclick="goBack()">â†</button>
            <h1>ã‚ íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</h1>
            <button class="chart-button" onclick="openChart()" title="íˆë¼ê°€ë‚˜ í‘œ ë³´ê¸°">è¡¨</button>
        </div>

        <div class="level-selector">
            <button class="level-btn active" onclick="selectTab('basic')">ì²­ìŒÂ·íƒìŒÂ·ë°˜íƒìŒ</button>
            <button class="level-btn" onclick="selectTab('extended')">ìš”ìŒ (æ‹—éŸ³)</button>
        </div>

        <div class="category-selector" id="categorySelector"></div>

        <div class="progress" id="progressText">1 / 5</div>

        <div class="character-display">
            <div class="current-character" id="currentCharacter">ã‚</div>
            <div class="character-info" id="characterInfo">a (ì•„)</div>
        </div>

        <div class="canvas-container">
            <canvas id="drawingCanvas"></canvas>
            <canvas id="guideCanvas" class="guide-canvas"></canvas>
        </div>

        <div class="controls">
            <button class="btn-prev" onclick="prevCharacter()">â—€ ì´ì „</button>
            <button class="btn-next" onclick="nextCharacter()">ë‹¤ìŒ â–¶</button>
            <button class="btn-clear" onclick="clearCanvas()">ğŸ—‘ ì§€ìš°ê¸°</button>
            <button class="btn-show-guide" onclick="toggleGuide()">ğŸ‘ ê°€ì´ë“œ</button>
        </div>

        <div class="stroke-order" id="strokeOrder">íšìˆœ: 1íš: ì™¼ìª½ ìœ„â†’ì˜¤ë¥¸ìª½ ì•„ë˜ ê³¡ì„ </div>
    </div>

    <!-- íˆë¼ê°€ë‚˜ í‘œ ëª¨ë‹¬ -->
    <div class="modal-overlay" id="chartModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“‹ íˆë¼ê°€ë‚˜ í‘œ</h2>
                <button class="modal-close" onclick="closeChart()">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="table-tabs">
                    <button class="table-tab active" onclick="switchTableTab('seion')">ì²­ìŒ Â· íƒìŒ Â· ë°˜íƒìŒ</button>
                    <button class="table-tab" onclick="switchTableTab('yoon')">ìš”ìŒ (æ‹—éŸ³)</button>
                </div>

                <!-- ì²­ìŒ/íƒìŒ/ë°˜íƒìŒ í†µí•© í‘œ -->
                <div class="table-section active" id="seion-section">
                    <div class="section-title">âœ¨ ì²­ìŒ Â· íƒìŒ Â· ë°˜íƒìŒ</div>
                    <div class="table-scroll">
                        <table class="hiragana-table combined-table">
                            <thead>
                                <tr>
                                    <th></th>
                                    <th>ã‚</th>
                                    <th>ã‹</th>
                                    <th class="dakuon-header">ãŒ</th>
                                    <th>ã•</th>
                                    <th class="dakuon-header">ã–</th>
                                    <th>ãŸ</th>
                                    <th class="dakuon-header">ã </th>
                                    <th>ãª</th>
                                    <th>ã¯</th>
                                    <th class="dakuon-header">ã°</th>
                                    <th class="handakuon-header">ã±</th>
                                    <th>ã¾</th>
                                    <th>ã‚„</th>
                                    <th>ã‚‰</th>
                                    <th>ã‚</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="row-header">ã‚ë‹¨</td>
                                    <td><div class="char-cell"><span class="char-main">ã‚</span><span class="char-romaji">a / ì•„</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‹</span><span class="char-romaji">ka / ì¹´</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ãŒ</span><span class="char-romaji">ga / ê°€</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã•</span><span class="char-romaji">sa / ì‚¬</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã–</span><span class="char-romaji">za / ì</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ãŸ</span><span class="char-romaji">ta / íƒ€</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã </span><span class="char-romaji">da / ë‹¤</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ãª</span><span class="char-romaji">na / ë‚˜</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¯</span><span class="char-romaji">ha / í•˜</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã°</span><span class="char-romaji">ba / ë°”</span></div></td>
                                    <td class="handakuon-cell"><div class="char-cell"><span class="char-main">ã±</span><span class="char-romaji">pa / íŒŒ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¾</span><span class="char-romaji">ma / ë§ˆ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚„</span><span class="char-romaji">ya / ì•¼</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚‰</span><span class="char-romaji">ra / ë¼</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚</span><span class="char-romaji">wa / ì™€</span></div></td>
                                </tr>
                                <tr>
                                    <td class="row-header">ã„ë‹¨</td>
                                    <td><div class="char-cell"><span class="char-main">ã„</span><span class="char-romaji">i / ì´</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">ki / í‚¤</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">gi / ê¸°</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã—</span><span class="char-romaji">shi / ì‹œ</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã˜</span><span class="char-romaji">ji / ì§€</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¡</span><span class="char-romaji">chi / ì¹˜</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã¢</span><span class="char-romaji">ji / ì§€</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã«</span><span class="char-romaji">ni / ë‹ˆ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã²</span><span class="char-romaji">hi / íˆ</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã³</span><span class="char-romaji">bi / ë¹„</span></div></td>
                                    <td class="handakuon-cell"><div class="char-cell"><span class="char-main">ã´</span><span class="char-romaji">pi / í”¼</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¿</span><span class="char-romaji">mi / ë¯¸</span></div></td>
                                    <td class="empty-cell">-</td>
                                    <td><div class="char-cell"><span class="char-main">ã‚Š</span><span class="char-romaji">ri / ë¦¬</span></div></td>
                                    <td class="empty-cell">-</td>
                                </tr>
                                <tr>
                                    <td class="row-header">ã†ë‹¨</td>
                                    <td><div class="char-cell"><span class="char-main">ã†</span><span class="char-romaji">u / ìš°</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">ku / ì¿ </span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">gu / êµ¬</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã™</span><span class="char-romaji">su / ìŠ¤</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ãš</span><span class="char-romaji">zu / ì¦ˆ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¤</span><span class="char-romaji">tsu / ì¸ </span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã¥</span><span class="char-romaji">zu / ì¦ˆ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¬</span><span class="char-romaji">nu / ëˆ„</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ãµ</span><span class="char-romaji">fu / í›„</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã¶</span><span class="char-romaji">bu / ë¶€</span></div></td>
                                    <td class="handakuon-cell"><div class="char-cell"><span class="char-main">ã·</span><span class="char-romaji">pu / í‘¸</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚€</span><span class="char-romaji">mu / ë¬´</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚†</span><span class="char-romaji">yu / ìœ </span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚‹</span><span class="char-romaji">ru / ë£¨</span></div></td>
                                    <td class="empty-cell">-</td>
                                </tr>
                                <tr>
                                    <td class="row-header">ãˆë‹¨</td>
                                    <td><div class="char-cell"><span class="char-main">ãˆ</span><span class="char-romaji">e / ì—</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‘</span><span class="char-romaji">ke / ì¼€</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã’</span><span class="char-romaji">ge / ê²Œ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã›</span><span class="char-romaji">se / ì„¸</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ãœ</span><span class="char-romaji">ze / ì œ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¦</span><span class="char-romaji">te / í…Œ</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã§</span><span class="char-romaji">de / ë°</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã­</span><span class="char-romaji">ne / ë„¤</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¸</span><span class="char-romaji">he / í—¤</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã¹</span><span class="char-romaji">be / ë² </span></div></td>
                                    <td class="handakuon-cell"><div class="char-cell"><span class="char-main">ãº</span><span class="char-romaji">pe / í˜</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚</span><span class="char-romaji">me / ë©”</span></div></td>
                                    <td class="empty-cell">-</td>
                                    <td><div class="char-cell"><span class="char-main">ã‚Œ</span><span class="char-romaji">re / ë ˆ</span></div></td>
                                    <td class="empty-cell">-</td>
                                </tr>
                                <tr>
                                    <td class="row-header">ãŠë‹¨</td>
                                    <td><div class="char-cell"><span class="char-main">ãŠ</span><span class="char-romaji">o / ì˜¤</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã“</span><span class="char-romaji">ko / ì½”</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã”</span><span class="char-romaji">go / ê³ </span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">so / ì†Œ</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã</span><span class="char-romaji">zo / ì¡°</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã¨</span><span class="char-romaji">to / í† </span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã©</span><span class="char-romaji">do / ë„</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã®</span><span class="char-romaji">no / ë…¸</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã»</span><span class="char-romaji">ho / í˜¸</span></div></td>
                                    <td class="dakuon-cell"><div class="char-cell"><span class="char-main">ã¼</span><span class="char-romaji">bo / ë³´</span></div></td>
                                    <td class="handakuon-cell"><div class="char-cell"><span class="char-main">ã½</span><span class="char-romaji">po / í¬</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚‚</span><span class="char-romaji">mo / ëª¨</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚ˆ</span><span class="char-romaji">yo / ìš”</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚</span><span class="char-romaji">ro / ë¡œ</span></div></td>
                                    <td><div class="char-cell"><span class="char-main">ã‚’</span><span class="char-romaji">wo / ì˜¤</span></div></td>
                                </tr>
                                <tr>
                                    <td class="row-header">ã‚“</td>
                                    <td colspan="15"><div class="char-cell"><span class="char-main">ã‚“</span><span class="char-romaji">n / ì‘</span></div></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <div class="legend">
                        <span class="legend-item"><span class="legend-box seion-box"></span> ì²­ìŒ</span>
                        <span class="legend-item"><span class="legend-box dakuon-box"></span> íƒìŒ (ã‚›)</span>
                        <span class="legend-item"><span class="legend-box handakuon-box"></span> ë°˜íƒìŒ (ã‚œ)</span>
                    </div>
                </div>

                <!-- ìš”ìŒ í‘œ -->
                <div class="table-section" id="yoon-section">
                    <div class="section-title">ğŸµ ìš”ìŒ (ì‘ì€ ã‚„ãƒ»ã‚†ãƒ»ã‚ˆ ì¡°í•©)</div>
                    <table class="yoon-table">
                        <thead>
                            <tr>
                                <th></th>
                                <th>~ã‚ƒ</th>
                                <th>~ã‚…</th>
                                <th>~ã‚‡</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td class="row-header">ã</td>
                                <td><div class="char-cell"><span class="char-main">ãã‚ƒ</span><span class="char-romaji">kya / ìº¬</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ãã‚…</span><span class="char-romaji">kyu / í</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ãã‚‡</span><span class="char-romaji">kyo / ì¿„</span></div></td>
                            </tr>
                            <tr class="dakuon-row">
                                <td class="row-header">ã</td>
                                <td><div class="char-cell"><span class="char-main">ãã‚ƒ</span><span class="char-romaji">gya / ê°¸</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ãã‚…</span><span class="char-romaji">gyu / ê·œ</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ãã‚‡</span><span class="char-romaji">gyo / êµ</span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã—</td>
                                <td><div class="char-cell"><span class="char-main">ã—ã‚ƒ</span><span class="char-romaji">sha / ìƒ¤</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã—ã‚…</span><span class="char-romaji">shu / ìŠˆ</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã—ã‚‡</span><span class="char-romaji">sho / ì‡¼</span></div></td>
                            </tr>
                            <tr class="dakuon-row">
                                <td class="row-header">ã˜</td>
                                <td><div class="char-cell"><span class="char-main">ã˜ã‚ƒ</span><span class="char-romaji">ja / ìŸˆ</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã˜ã‚…</span><span class="char-romaji">ju / ì¥¬</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã˜ã‚‡</span><span class="char-romaji">jo / ì£ </span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã¡</td>
                                <td><div class="char-cell"><span class="char-main">ã¡ã‚ƒ</span><span class="char-romaji">cha / ì± </span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã¡ã‚…</span><span class="char-romaji">chu / ì¸„</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã¡ã‚‡</span><span class="char-romaji">cho / ìµ¸</span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã«</td>
                                <td><div class="char-cell"><span class="char-main">ã«ã‚ƒ</span><span class="char-romaji">nya / ëƒ</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã«ã‚…</span><span class="char-romaji">nyu / ë‰´</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã«ã‚‡</span><span class="char-romaji">nyo / ë‡¨</span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã²</td>
                                <td><div class="char-cell"><span class="char-main">ã²ã‚ƒ</span><span class="char-romaji">hya / í–</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã²ã‚…</span><span class="char-romaji">hyu / íœ´</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã²ã‚‡</span><span class="char-romaji">hyo / íš¨</span></div></td>
                            </tr>
                            <tr class="dakuon-row">
                                <td class="row-header">ã³</td>
                                <td><div class="char-cell"><span class="char-main">ã³ã‚ƒ</span><span class="char-romaji">bya / ë±Œ</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã³ã‚…</span><span class="char-romaji">byu / ë·°</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã³ã‚‡</span><span class="char-romaji">byo / ëµ¤</span></div></td>
                            </tr>
                            <tr class="handakuon-row">
                                <td class="row-header">ã´</td>
                                <td><div class="char-cell"><span class="char-main">ã´ã‚ƒ</span><span class="char-romaji">pya / í„</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã´ã‚…</span><span class="char-romaji">pyu / í“¨</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã´ã‚‡</span><span class="char-romaji">pyo / í‘œ</span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã¿</td>
                                <td><div class="char-cell"><span class="char-main">ã¿ã‚ƒ</span><span class="char-romaji">mya / ë¨€</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã¿ã‚…</span><span class="char-romaji">myu / ë®¤</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã¿ã‚‡</span><span class="char-romaji">myo / ë¬˜</span></div></td>
                            </tr>
                            <tr>
                                <td class="row-header">ã‚Š</td>
                                <td><div class="char-cell"><span class="char-main">ã‚Šã‚ƒ</span><span class="char-romaji">rya / ë´</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã‚Šã‚…</span><span class="char-romaji">ryu / ë¥˜</span></div></td>
                                <td><div class="char-cell"><span class="char-main">ã‚Šã‚‡</span><span class="char-romaji">ryo / ë£Œ</span></div></td>
                            </tr>
                        </tbody>
                    </table>
                    <div class="legend">
                        <span class="legend-item"><span class="legend-box seion-box"></span> ì²­ìŒ ìš”ìŒ</span>
                        <span class="legend-item"><span class="legend-box dakuon-box"></span> íƒìŒ ìš”ìŒ</span>
                        <span class="legend-item"><span class="legend-box handakuon-box"></span> ë°˜íƒìŒ ìš”ìŒ</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ì²­ìŒ+íƒìŒ+ë°˜íƒìŒ í†µí•© ë°ì´í„°
        const basicData = {
            a: [
                { char: 'ã‚', romaji: 'a', korean: 'ì•„', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã„', romaji: 'i', korean: 'ì´', strokes: '2íš: ì™¼ìª½ ì„¸ë¡œâ†’ì˜¤ë¥¸ìª½ ì„¸ë¡œ' },
                { char: 'ã†', romaji: 'u', korean: 'ìš°', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ãˆ', romaji: 'e', korean: 'ì—', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ãŠ', romaji: 'o', korean: 'ì˜¤', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' }
            ],
            ka: [
                { char: 'ã‹', romaji: 'ka', korean: 'ì¹´', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ãŒ', romaji: 'ga', korean: 'ê°€', strokes: 'ã‹ + íƒì (ã‚›)' },
                { char: 'ã', romaji: 'ki', korean: 'í‚¤', strokes: '4íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ê°€ë¡œâ†’ì„¸ë¡œ' },
                { char: 'ã', romaji: 'gi', korean: 'ê¸°', strokes: 'ã + íƒì (ã‚›)' },
                { char: 'ã', romaji: 'ku', korean: 'ì¿ ', strokes: '1íš: ì™¼ìª½â†’ì˜¤ë¥¸ìª½ êº¾ì„' },
                { char: 'ã', romaji: 'gu', korean: 'êµ¬', strokes: 'ã + íƒì (ã‚›)' },
                { char: 'ã‘', romaji: 'ke', korean: 'ì¼€', strokes: '3íš: ì™¼ìª½ ì„¸ë¡œâ†’ìœ„ ê°€ë¡œâ†’ì˜¤ë¥¸ìª½ ì„¸ë¡œ' },
                { char: 'ã’', romaji: 'ge', korean: 'ê²Œ', strokes: 'ã‘ + íƒì (ã‚›)' },
                { char: 'ã“', romaji: 'ko', korean: 'ì½”', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê°€ë¡œ' },
                { char: 'ã”', romaji: 'go', korean: 'ê³ ', strokes: 'ã“ + íƒì (ã‚›)' }
            ],
            sa: [
                { char: 'ã•', romaji: 'sa', korean: 'ì‚¬', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã–', romaji: 'za', korean: 'ì', strokes: 'ã• + íƒì (ã‚›)' },
                { char: 'ã—', romaji: 'shi', korean: 'ì‹œ', strokes: '1íš: ìœ„â†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã˜', romaji: 'ji', korean: 'ì§€', strokes: 'ã— + íƒì (ã‚›)' },
                { char: 'ã™', romaji: 'su', korean: 'ìŠ¤', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ãš', romaji: 'zu', korean: 'ì¦ˆ', strokes: 'ã™ + íƒì (ã‚›)' },
                { char: 'ã›', romaji: 'se', korean: 'ì„¸', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ì„¸ë¡œ' },
                { char: 'ãœ', romaji: 'ze', korean: 'ì œ', strokes: 'ã› + íƒì (ã‚›)' },
                { char: 'ã', romaji: 'so', korean: 'ì†Œ', strokes: '1íš: ìœ„â†’ì•„ë˜ ì§€ê·¸ì¬ê·¸' },
                { char: 'ã', romaji: 'zo', korean: 'ì¡°', strokes: 'ã + íƒì (ã‚›)' }
            ],
            ta: [
                { char: 'ãŸ', romaji: 'ta', korean: 'íƒ€', strokes: '4íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì•„ë˜ ê°€ë¡œâ†’ì ' },
                { char: 'ã ', romaji: 'da', korean: 'ë‹¤', strokes: 'ãŸ + íƒì (ã‚›)' },
                { char: 'ã¡', romaji: 'chi', korean: 'ì¹˜', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã¢', romaji: 'ji', korean: 'ì§€', strokes: 'ã¡ + íƒì (ã‚›)' },
                { char: 'ã¤', romaji: 'tsu', korean: 'ì¸ ', strokes: '1íš: ì™¼ìª½â†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' },
                { char: 'ã¥', romaji: 'zu', korean: 'ì¦ˆ', strokes: 'ã¤ + íƒì (ã‚›)' },
                { char: 'ã¦', romaji: 'te', korean: 'í…Œ', strokes: '1íš: ìœ„â†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã§', romaji: 'de', korean: 'ë°', strokes: 'ã¦ + íƒì (ã‚›)' },
                { char: 'ã¨', romaji: 'to', korean: 'í† ', strokes: '2íš: ìœ„ ì„¸ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã©', romaji: 'do', korean: 'ë„', strokes: 'ã¨ + íƒì (ã‚›)' }
            ],
            na: [
                { char: 'ãª', romaji: 'na', korean: 'ë‚˜', strokes: '4íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì â†’ê³¡ì„ ' },
                { char: 'ã«', romaji: 'ni', korean: 'ë‹ˆ', strokes: '3íš: ì™¼ìª½ ì„¸ë¡œâ†’ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê°€ë¡œ' },
                { char: 'ã¬', romaji: 'nu', korean: 'ëˆ„', strokes: '2íš: ì™¼ìª½ ê³¡ì„ â†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' },
                { char: 'ã­', romaji: 'ne', korean: 'ë„¤', strokes: '2íš: ì™¼ìª½ ì„¸ë¡œâ†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' },
                { char: 'ã®', romaji: 'no', korean: 'ë…¸', strokes: '1íš: ì›í˜• ê³¡ì„ ' }
            ],
            ha: [
                { char: 'ã¯', romaji: 'ha', korean: 'í•˜', strokes: '3íš: ì™¼ìª½ ì„¸ë¡œâ†’ìœ„ ê°€ë¡œâ†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' },
                { char: 'ã°', romaji: 'ba', korean: 'ë°”', strokes: 'ã¯ + íƒì (ã‚›)' },
                { char: 'ã±', romaji: 'pa', korean: 'íŒŒ', strokes: 'ã¯ + ë°˜íƒì (ã‚œ)' },
                { char: 'ã²', romaji: 'hi', korean: 'íˆ', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã³', romaji: 'bi', korean: 'ë¹„', strokes: 'ã² + íƒì (ã‚›)' },
                { char: 'ã´', romaji: 'pi', korean: 'í”¼', strokes: 'ã² + ë°˜íƒì (ã‚œ)' },
                { char: 'ãµ', romaji: 'fu', korean: 'í›„', strokes: '4íš: ì™¼ìª½ ìœ„ ì â†’ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ì„¸ë¡œ' },
                { char: 'ã¶', romaji: 'bu', korean: 'ë¶€', strokes: 'ãµ + íƒì (ã‚›)' },
                { char: 'ã·', romaji: 'pu', korean: 'í‘¸', strokes: 'ãµ + ë°˜íƒì (ã‚œ)' },
                { char: 'ã¸', romaji: 'he', korean: 'í—¤', strokes: '1íš: ì™¼ìª½â†’ì˜¤ë¥¸ìª½ ì‚¬ì„ ' },
                { char: 'ã¹', romaji: 'be', korean: 'ë² ', strokes: 'ã¸ + íƒì (ã‚›)' },
                { char: 'ãº', romaji: 'pe', korean: 'í˜', strokes: 'ã¸ + ë°˜íƒì (ã‚œ)' },
                { char: 'ã»', romaji: 'ho', korean: 'í˜¸', strokes: '4íš: ë§¨ ìœ„ ê°€ë¡œâ†’ì™¼ìª½ ì„¸ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì˜¤ë¥¸ìª½ ì„¸ë¡œ' },
                { char: 'ã¼', romaji: 'bo', korean: 'ë³´', strokes: 'ã» + íƒì (ã‚›)' },
                { char: 'ã½', romaji: 'po', korean: 'í¬', strokes: 'ã» + ë°˜íƒì (ã‚œ)' }
            ],
            ma: [
                { char: 'ã¾', romaji: 'ma', korean: 'ë§ˆ', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì„¸ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã¿', romaji: 'mi', korean: 'ë¯¸', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚€', romaji: 'mu', korean: 'ë¬´', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ì„¸ë¡œ' },
                { char: 'ã‚', romaji: 'me', korean: 'ë©”', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚‚', romaji: 'mo', korean: 'ëª¨', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ì„¸ë¡œ' }
            ],
            ya: [
                { char: 'ã‚„', romaji: 'ya', korean: 'ì•¼', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚†', romaji: 'yu', korean: 'ìœ ', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚ˆ', romaji: 'yo', korean: 'ìš”', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' }
            ],
            ra: [
                { char: 'ã‚‰', romaji: 'ra', korean: 'ë¼', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚Š', romaji: 'ri', korean: 'ë¦¬', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚‹', romaji: 'ru', korean: 'ë£¨', strokes: '1íš: ìœ„â†’ì•„ë˜ ë‚˜ì„ í˜• ê³¡ì„ ' },
                { char: 'ã‚Œ', romaji: 're', korean: 'ë ˆ', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚', romaji: 'ro', korean: 'ë¡œ', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ì„¸ë¡œ' }
            ],
            wa: [
                { char: 'ã‚', romaji: 'wa', korean: 'ì™€', strokes: '2íš: ìœ„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚’', romaji: 'wo/o', korean: 'ì˜¤(ì¡°ì‚¬)', strokes: '3íš: ìœ„ ê°€ë¡œâ†’ì¤‘ê°„ ê°€ë¡œâ†’ì•„ë˜ ê³¡ì„ ' },
                { char: 'ã‚“', romaji: 'n', korean: 'ì‘', strokes: '1íš: ì™¼ìª½â†’ì˜¤ë¥¸ìª½ ê³¡ì„ ' }
            ]
        };

        // ìš”ìŒ ë°ì´í„° (ì²­ìŒ/íƒìŒ/ë°˜íƒìŒ ìš”ìŒ í†µí•©)
        const extendedData = {
            kya: [
                { char: 'ãã‚ƒ', romaji: 'kya', korean: 'ìº¬', strokes: 'ã + ì‘ì€ ã‚ƒ' },
                { char: 'ãã‚…', romaji: 'kyu', korean: 'í', strokes: 'ã + ì‘ì€ ã‚…' },
                { char: 'ãã‚‡', romaji: 'kyo', korean: 'ì¿„', strokes: 'ã + ì‘ì€ ã‚‡' },
                { char: 'ãã‚ƒ', romaji: 'gya', korean: 'ê°¸', strokes: 'ã + ì‘ì€ ã‚ƒ' },
                { char: 'ãã‚…', romaji: 'gyu', korean: 'ê·œ', strokes: 'ã + ì‘ì€ ã‚…' },
                { char: 'ãã‚‡', romaji: 'gyo', korean: 'êµ', strokes: 'ã + ì‘ì€ ã‚‡' }
            ],
            sha: [
                { char: 'ã—ã‚ƒ', romaji: 'sha', korean: 'ìƒ¤', strokes: 'ã— + ì‘ì€ ã‚ƒ' },
                { char: 'ã—ã‚…', romaji: 'shu', korean: 'ìŠˆ', strokes: 'ã— + ì‘ì€ ã‚…' },
                { char: 'ã—ã‚‡', romaji: 'sho', korean: 'ì‡¼', strokes: 'ã— + ì‘ì€ ã‚‡' },
                { char: 'ã˜ã‚ƒ', romaji: 'ja', korean: 'ìŸˆ', strokes: 'ã˜ + ì‘ì€ ã‚ƒ' },
                { char: 'ã˜ã‚…', romaji: 'ju', korean: 'ì¥¬', strokes: 'ã˜ + ì‘ì€ ã‚…' },
                { char: 'ã˜ã‚‡', romaji: 'jo', korean: 'ì£ ', strokes: 'ã˜ + ì‘ì€ ã‚‡' }
            ],
            cha: [
                { char: 'ã¡ã‚ƒ', romaji: 'cha', korean: 'ì± ', strokes: 'ã¡ + ì‘ì€ ã‚ƒ' },
                { char: 'ã¡ã‚…', romaji: 'chu', korean: 'ì¸„', strokes: 'ã¡ + ì‘ì€ ã‚…' },
                { char: 'ã¡ã‚‡', romaji: 'cho', korean: 'ìµ¸', strokes: 'ã¡ + ì‘ì€ ã‚‡' }
            ],
            nya: [
                { char: 'ã«ã‚ƒ', romaji: 'nya', korean: 'ëƒ', strokes: 'ã« + ì‘ì€ ã‚ƒ' },
                { char: 'ã«ã‚…', romaji: 'nyu', korean: 'ë‰´', strokes: 'ã« + ì‘ì€ ã‚…' },
                { char: 'ã«ã‚‡', romaji: 'nyo', korean: 'ë‡¨', strokes: 'ã« + ì‘ì€ ã‚‡' }
            ],
            hya: [
                { char: 'ã²ã‚ƒ', romaji: 'hya', korean: 'í–', strokes: 'ã² + ì‘ì€ ã‚ƒ' },
                { char: 'ã²ã‚…', romaji: 'hyu', korean: 'íœ´', strokes: 'ã² + ì‘ì€ ã‚…' },
                { char: 'ã²ã‚‡', romaji: 'hyo', korean: 'íš¨', strokes: 'ã² + ì‘ì€ ã‚‡' },
                { char: 'ã³ã‚ƒ', romaji: 'bya', korean: 'ë±Œ', strokes: 'ã³ + ì‘ì€ ã‚ƒ' },
                { char: 'ã³ã‚…', romaji: 'byu', korean: 'ë·°', strokes: 'ã³ + ì‘ì€ ã‚…' },
                { char: 'ã³ã‚‡', romaji: 'byo', korean: 'ëµ¤', strokes: 'ã³ + ì‘ì€ ã‚‡' },
                { char: 'ã´ã‚ƒ', romaji: 'pya', korean: 'í„', strokes: 'ã´ + ì‘ì€ ã‚ƒ' },
                { char: 'ã´ã‚…', romaji: 'pyu', korean: 'í“¨', strokes: 'ã´ + ì‘ì€ ã‚…' },
                { char: 'ã´ã‚‡', romaji: 'pyo', korean: 'í‘œ', strokes: 'ã´ + ì‘ì€ ã‚‡' }
            ],
            mya: [
                { char: 'ã¿ã‚ƒ', romaji: 'mya', korean: 'ë¨€', strokes: 'ã¿ + ì‘ì€ ã‚ƒ' },
                { char: 'ã¿ã‚…', romaji: 'myu', korean: 'ë®¤', strokes: 'ã¿ + ì‘ì€ ã‚…' },
                { char: 'ã¿ã‚‡', romaji: 'myo', korean: 'ë¬˜', strokes: 'ã¿ + ì‘ì€ ã‚‡' }
            ],
            rya: [
                { char: 'ã‚Šã‚ƒ', romaji: 'rya', korean: 'ë´', strokes: 'ã‚Š + ì‘ì€ ã‚ƒ' },
                { char: 'ã‚Šã‚…', romaji: 'ryu', korean: 'ë¥˜', strokes: 'ã‚Š + ì‘ì€ ã‚…' },
                { char: 'ã‚Šã‚‡', romaji: 'ryo', korean: 'ë£Œ', strokes: 'ã‚Š + ì‘ì€ ã‚‡' }
            ]
        };

        // ì¹´í…Œê³ ë¦¬ ì„¤ì •
        const basicCategories = ['a', 'ka', 'sa', 'ta', 'na', 'ha', 'ma', 'ya', 'ra', 'wa'];
        const extendedCategories = ['kya', 'sha', 'cha', 'nya', 'hya', 'mya', 'rya'];

        const categoryLabels = {
            a: 'ã‚',
            ka: 'ã‹',
            sa: 'ã•',
            ta: 'ãŸ',
            na: 'ãª',
            ha: 'ã¯',
            ma: 'ã¾',
            ya: 'ã‚„',
            ra: 'ã‚‰',
            wa: 'ã‚',
            kya: 'ãã‚ƒ',
            sha: 'ã—ã‚ƒ',
            cha: 'ã¡ã‚ƒ',
            nya: 'ã«ã‚ƒ',
            hya: 'ã²ã‚ƒ',
            mya: 'ã¿ã‚ƒ',
            rya: 'ã‚Šã‚ƒ'
        };

        let currentTab = 'basic';
        let currentCategory = 'a';
        let currentIndex = 0;
        let isDrawing = false;
        let showGuide = true;

        const canvas = document.getElementById('drawingCanvas');
        const guideCanvas = document.getElementById('guideCanvas');
        const ctx = canvas.getContext('2d');
        const guideCtx = guideCanvas.getContext('2d');

        function getCurrentData() {
            return currentTab === 'basic' ? basicData : extendedData;
        }

        function initCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            
            canvas.width = rect.width;
            canvas.height = 250;
            guideCanvas.width = rect.width;
            guideCanvas.height = 250;

            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#667eea';

            drawGuideCharacter();
        }

        function drawGuideCharacter() {
            const data = getCurrentData();
            const currentChar = data[currentCategory][currentIndex];
            guideCtx.clearRect(0, 0, guideCanvas.width, guideCanvas.height);
            
            const charLength = currentChar.char.length;
            let fontSize;
            
            if (charLength === 1) {
                fontSize = Math.min(guideCanvas.width, guideCanvas.height) * 0.8;
            } else {
                const testFontSize = 100;
                guideCtx.font = `bold ${testFontSize}px sans-serif`;
                const textWidth = guideCtx.measureText(currentChar.char).width;
                const targetWidth = guideCanvas.width * 0.85;
                fontSize = testFontSize * (targetWidth / textWidth);
                
                const maxFontSize = guideCanvas.height * 0.7;
                fontSize = Math.min(fontSize, maxFontSize);
            }
            
            guideCtx.font = `bold ${fontSize}px sans-serif`;
            guideCtx.fillStyle = '#764ba2';
            guideCtx.textAlign = 'center';
            guideCtx.textBaseline = 'middle';
            guideCtx.fillText(currentChar.char, guideCanvas.width / 2, guideCanvas.height / 2);
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
        }

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function toggleGuide() {
            showGuide = !showGuide;
            guideCanvas.style.opacity = showGuide ? '0.3' : '0';
        }

        function nextCharacter() {
            const data = getCurrentData();
            const categoryData = data[currentCategory];
            currentIndex = (currentIndex + 1) % categoryData.length;
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function prevCharacter() {
            const data = getCurrentData();
            const categoryData = data[currentCategory];
            currentIndex = (currentIndex - 1 + categoryData.length) % categoryData.length;
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function selectCategory(category) {
            currentCategory = category;
            currentIndex = 0;
            
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function selectTab(tab) {
            currentTab = tab;
            
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateCategoryButtons();
            
            const categories = currentTab === 'basic' ? basicCategories : extendedCategories;
            currentCategory = categories[0];
            currentIndex = 0;
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function updateCategoryButtons() {
            const categorySelector = document.getElementById('categorySelector');
            const categories = currentTab === 'basic' ? basicCategories : extendedCategories;
            
            categorySelector.innerHTML = '';
            categories.forEach((cat, index) => {
                const button = document.createElement('button');
                button.className = 'category-btn' + (index === 0 ? ' active' : '');
                button.textContent = categoryLabels[cat];
                button.onclick = function() { selectCategory(cat); };
                categorySelector.appendChild(button);
            });
        }

        function updateDisplay() {
            const data = getCurrentData();
            const currentChar = data[currentCategory][currentIndex];
            document.getElementById('currentCharacter').textContent = currentChar.char;
            document.getElementById('characterInfo').textContent = 
                `${currentChar.romaji} (${currentChar.korean})`;
            document.getElementById('strokeOrder').textContent = 
                `íšìˆœ: ${currentChar.strokes}`;
            document.getElementById('progressText').textContent = 
                `${currentIndex + 1} / ${data[currentCategory].length}`;
        }

        // ëª¨ë‹¬ ê´€ë ¨ í•¨ìˆ˜
        function openChart() {
            document.getElementById('chartModal').classList.add('show');
            document.body.style.overflow = 'hidden';
        }

        function closeChart() {
            document.getElementById('chartModal').classList.remove('show');
            document.body.style.overflow = '';
        }

        function switchTableTab(tabName) {
            document.querySelectorAll('.table-tab').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            document.querySelectorAll('.table-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(tabName + '-section').classList.add('active');
        }

        // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­ì‹œ ë‹«ê¸°
        document.getElementById('chartModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeChart();
            }
        });

        // ESC í‚¤ë¡œ ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeChart();
            }
        });

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        window.addEventListener('resize', initCanvas);
        
        function goBack() {
            window.location.href = 'index.html';
        }
        
        // ì´ˆê¸°í™”
        updateCategoryButtons();
        initCanvas();
        updateDisplay();
    </script>
</body>
</html>
