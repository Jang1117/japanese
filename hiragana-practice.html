<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #667eea;
            margin-bottom: 20px;
            font-size: 28px;
        }

        .character-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .current-character {
            font-size: 80px;
            color: #764ba2;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .character-info {
            font-size: 18px;
            color: #666;
        }

        .canvas-container {
            position: relative;
            background: #f8f9fa;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #e0e0e0;
            overflow: hidden;
        }

        #drawingCanvas {
            display: block;
            width: 100%;
            height: 300px;
            cursor: crosshair;
            touch-action: none;
        }

        .guide-canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0.3;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            flex: 1;
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-clear {
            background: #ff6b6b;
            color: white;
        }

        .btn-clear:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .btn-next {
            background: #51cf66;
            color: white;
        }

        .btn-next:hover {
            background: #40c057;
            transform: translateY(-2px);
        }

        .btn-show-guide {
            background: #ffd43b;
            color: #333;
        }

        .btn-show-guide:hover {
            background: #fcc419;
            transform: translateY(-2px);
        }

        .progress {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .category-selector {
            display: flex;
            gap: 8px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .category-btn {
            flex: 1 1 calc(20% - 8px);
            min-width: 70px;
            padding: 8px 6px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            font-size: 14px;
        }

        .category-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .stroke-order {
            text-align: center;
            margin-top: 10px;
            padding: 10px;
            background: #e7f5ff;
            border-radius: 8px;
            font-size: 14px;
            color: #1864ab;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ‡¯ğŸ‡µ íˆë¼ê°€ë‚˜ ë”°ë¼ì“°ê¸°</h1>
        
        <div class="category-selector">
            <button class="category-btn active" onclick="selectCategory('basic')">ã‚í–‰</button>
            <button class="category-btn" onclick="selectCategory('ka')">ã‹í–‰</button>
            <button class="category-btn" onclick="selectCategory('sa')">ã•í–‰</button>
            <button class="category-btn" onclick="selectCategory('ta')">ãŸí–‰</button>
            <button class="category-btn" onclick="selectCategory('na')">ãªí–‰</button>
            <button class="category-btn" onclick="selectCategory('ha')">ã¯í–‰</button>
            <button class="category-btn" onclick="selectCategory('ma')">ã¾í–‰</button>
            <button class="category-btn" onclick="selectCategory('ya')">ã‚„í–‰</button>
            <button class="category-btn" onclick="selectCategory('ra')">ã‚‰í–‰</button>
            <button class="category-btn" onclick="selectCategory('wa')">ã‚í–‰</button>
        </div>

        <div class="progress">
            <span id="progressText">1 / 5</span>
        </div>

        <div class="character-display">
            <div class="current-character" id="currentCharacter">ã‚</div>
            <div class="character-info" id="characterInfo">a (ì•„)</div>
        </div>

        <div class="canvas-container">
            <canvas id="guideCanvas" class="guide-canvas"></canvas>
            <canvas id="drawingCanvas"></canvas>
        </div>

        <div class="stroke-order" id="strokeOrder">
            íšìˆœ: ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ, ìœ„ì—ì„œ ì•„ë˜ë¡œ
        </div>

        <div class="controls">
            <button class="btn-clear" onclick="clearCanvas()">ì§€ìš°ê¸°</button>
            <button class="btn-show-guide" onclick="toggleGuide()">ê°€ì´ë“œ</button>
            <button class="btn-next" onclick="nextCharacter()">ë‹¤ìŒ</button>
        </div>
    </div>

    <script>
        const hiraganaData = {
            basic: [
                { char: 'ã‚', romaji: 'a', korean: 'ì•„', strokes: '3íš: ì™¼â†’ì˜¤ë¥¸, ê³¡ì„ , ì„¸ë¡œ' },
                { char: 'ã„', romaji: 'i', korean: 'ì´', strokes: '2íš: ì„¸ë¡œ, ì„¸ë¡œ' },
                { char: 'ã†', romaji: 'u', korean: 'ìš°', strokes: '2íš: ê°€ë¡œ, ê³¡ì„ ' },
                { char: 'ãˆ', romaji: 'e', korean: 'ì—', strokes: '2íš: ê°€ë¡œ+ê³¡ì„ , ê°€ë¡œ' },
                { char: 'ãŠ', romaji: 'o', korean: 'ì˜¤', strokes: '3íš: ê°€ë¡œ, ì„¸ë¡œ, ê³¡ì„ ' }
            ],
            ka: [
                { char: 'ã‹', romaji: 'ka', korean: 'ì¹´', strokes: '3íš' },
                { char: 'ã', romaji: 'ki', korean: 'í‚¤', strokes: '4íš' },
                { char: 'ã', romaji: 'ku', korean: 'ì¿ ', strokes: '1íš' },
                { char: 'ã‘', romaji: 'ke', korean: 'ì¼€', strokes: '3íš' },
                { char: 'ã“', romaji: 'ko', korean: 'ì½”', strokes: '2íš' }
            ],
            sa: [
                { char: 'ã•', romaji: 'sa', korean: 'ì‚¬', strokes: '3íš' },
                { char: 'ã—', romaji: 'shi', korean: 'ì‹œ', strokes: '1íš' },
                { char: 'ã™', romaji: 'su', korean: 'ìŠ¤', strokes: '2íš' },
                { char: 'ã›', romaji: 'se', korean: 'ì„¸', strokes: '3íš' },
                { char: 'ã', romaji: 'so', korean: 'ì†Œ', strokes: '1íš' }
            ],
            ta: [
                { char: 'ãŸ', romaji: 'ta', korean: 'íƒ€', strokes: '4íš' },
                { char: 'ã¡', romaji: 'chi', korean: 'ì¹˜', strokes: '2íš' },
                { char: 'ã¤', romaji: 'tsu', korean: 'ì¸ ', strokes: '1íš' },
                { char: 'ã¦', romaji: 'te', korean: 'í…Œ', strokes: '1íš' },
                { char: 'ã¨', romaji: 'to', korean: 'í† ', strokes: '2íš' }
            ],
            na: [
                { char: 'ãª', romaji: 'na', korean: 'ë‚˜', strokes: '4íš' },
                { char: 'ã«', romaji: 'ni', korean: 'ë‹ˆ', strokes: '3íš' },
                { char: 'ã¬', romaji: 'nu', korean: 'ëˆ„', strokes: '2íš' },
                { char: 'ã­', romaji: 'ne', korean: 'ë„¤', strokes: '2íš' },
                { char: 'ã®', romaji: 'no', korean: 'ë…¸', strokes: '1íš' }
            ],
            ha: [
                { char: 'ã¯', romaji: 'ha', korean: 'í•˜', strokes: '3íš' },
                { char: 'ã²', romaji: 'hi', korean: 'íˆ', strokes: '2íš' },
                { char: 'ãµ', romaji: 'fu', korean: 'í›„', strokes: '4íš' },
                { char: 'ã¸', romaji: 'he', korean: 'í—¤', strokes: '1íš' },
                { char: 'ã»', romaji: 'ho', korean: 'í˜¸', strokes: '4íš' }
            ],
            ma: [
                { char: 'ã¾', romaji: 'ma', korean: 'ë§ˆ', strokes: '3íš' },
                { char: 'ã¿', romaji: 'mi', korean: 'ë¯¸', strokes: '2íš' },
                { char: 'ã‚€', romaji: 'mu', korean: 'ë¬´', strokes: '3íš' },
                { char: 'ã‚', romaji: 'me', korean: 'ë©”', strokes: '2íš' },
                { char: 'ã‚‚', romaji: 'mo', korean: 'ëª¨', strokes: '3íš' }
            ],
            ya: [
                { char: 'ã‚„', romaji: 'ya', korean: 'ì•¼', strokes: '3íš' },
                { char: 'ã‚†', romaji: 'yu', korean: 'ìœ ', strokes: '2íš' },
                { char: 'ã‚ˆ', romaji: 'yo', korean: 'ìš”', strokes: '2íš' }
            ],
            ra: [
                { char: 'ã‚‰', romaji: 'ra', korean: 'ë¼', strokes: '2íš' },
                { char: 'ã‚Š', romaji: 'ri', korean: 'ë¦¬', strokes: '2íš' },
                { char: 'ã‚‹', romaji: 'ru', korean: 'ë£¨', strokes: '1íš' },
                { char: 'ã‚Œ', romaji: 're', korean: 'ë ˆ', strokes: '2íš' },
                { char: 'ã‚', romaji: 'ro', korean: 'ë¡œ', strokes: '3íš' }
            ],
            wa: [
                { char: 'ã‚', romaji: 'wa', korean: 'ì™€', strokes: '2íš' },
                { char: 'ã‚’', romaji: 'wo/o', korean: 'ì˜¤(ì¡°ì‚¬)', strokes: '3íš' },
                { char: 'ã‚“', romaji: 'n', korean: 'ì‘', strokes: '1íš' }
            ]
        };

        let currentCategory = 'basic';
        let currentIndex = 0;
        let isDrawing = false;
        let showGuide = false;

        const canvas = document.getElementById('drawingCanvas');
        const guideCanvas = document.getElementById('guideCanvas');
        const ctx = canvas.getContext('2d');
        const guideCtx = guideCanvas.getContext('2d');

        function initCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            
            canvas.width = rect.width;
            canvas.height = 300;
            guideCanvas.width = rect.width;
            guideCanvas.height = 300;

            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#667eea';

            drawGuideCharacter();
        }

        function drawGuideCharacter() {
            const currentChar = hiraganaData[currentCategory][currentIndex];
            guideCtx.clearRect(0, 0, guideCanvas.width, guideCanvas.height);
            
            // Calculate font size to fill 80% of canvas height
            const fontSize = Math.min(guideCanvas.width, guideCanvas.height) * 0.8;
            guideCtx.font = `bold ${fontSize}px sans-serif`;
            guideCtx.fillStyle = '#764ba2';
            guideCtx.textAlign = 'center';
            guideCtx.textBaseline = 'middle';
            guideCtx.fillText(currentChar.char, guideCanvas.width / 2, guideCanvas.height / 2);
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
        }

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function toggleGuide() {
            showGuide = !showGuide;
            guideCanvas.style.opacity = showGuide ? '0.3' : '0';
        }

        function nextCharacter() {
            const categoryData = hiraganaData[currentCategory];
            currentIndex = (currentIndex + 1) % categoryData.length;
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function selectCategory(category) {
            currentCategory = category;
            currentIndex = 0;
            
            document.querySelectorAll('.category-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateDisplay();
            clearCanvas();
            drawGuideCharacter();
        }

        function updateDisplay() {
            const currentChar = hiraganaData[currentCategory][currentIndex];
            document.getElementById('currentCharacter').textContent = currentChar.char;
            document.getElementById('characterInfo').textContent = 
                `${currentChar.romaji} (${currentChar.korean})`;
            document.getElementById('strokeOrder').textContent = 
                `íšìˆœ: ${currentChar.strokes}`;
            document.getElementById('progressText').textContent = 
                `${currentIndex + 1} / ${hiraganaData[currentCategory].length}`;
        }

        // Event listeners
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        window.addEventListener('resize', initCanvas);
        
        initCanvas();
        updateDisplay();
    </script>
</body>
</html>
