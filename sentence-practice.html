<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏùºÎ≥∏Ïñ¥ Î¨∏Ïû• Ïó∞Ïäµ</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&family=Noto+Sans+JP:wght@400;700&family=Zen+Maru+Gothic:wght@400;700&family=Kosugi+Maru&family=M+PLUS+Rounded+1c:wght@400;700&display=swap');
        
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root { --jp-font: 'Noto Sans JP', sans-serif; }
        
        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .jp-text { font-family: var(--jp-font); }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 600px;
            width: 100%;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 8px;
        }

        .back-button, .header-btn {
            background: #e9ecef;
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-button:hover { background: #dee2e6; transform: translateX(-3px); }
        .header-btn:hover { background: #dee2e6; }
        .header-btn.playing { background: #4facfe; color: white; animation: pulse 1s infinite; }
        .header-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        h1 { 
            color: #4facfe; 
            font-size: 20px; 
            flex: 1; 
            min-width: 0;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .header-buttons { display: flex; gap: 6px; align-items: center; flex-shrink: 0; }

        /* ÎìúÎ°≠Îã§Ïö¥ Í≥µÌÜµ */
        .dropdown { position: relative; display: inline-block; }
        .dropdown-content {
            display: none;
            position: absolute;
            top: 100%;
            right: 0;
            background: white;
            min-width: 220px;
            max-height: 350px;
            overflow-y: auto;
            box-shadow: 0 8px 16px rgba(0,0,0,0.2);
            border-radius: 8px;
            z-index: 100;
        }
        .dropdown-content.show { display: block; }
        .dropdown-option {
            padding: 10px 15px;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            border-bottom: 1px solid #f0f0f0;
        }
        .dropdown-option:last-child { border-bottom: none; }
        .dropdown-option:hover { background: #f0f0f0; }
        .dropdown-option.active { background: #4facfe; color: white; }

        .voice-category {
            padding: 8px 15px;
            background: #f8f9fa;
            font-size: 11px;
            font-weight: bold;
            color: #666;
            text-transform: uppercase;
            position: sticky;
            top: 0;
        }

        .voice-badge {
            font-size: 9px;
            padding: 2px 5px;
            border-radius: 4px;
            background: #e9ecef;
            color: #666;
        }
        .voice-badge.local { background: #d3f9d8; color: #2b8a3e; }
        .voice-badge.cloud { background: #d0ebff; color: #1864ab; }
        .voice-badge.voicevox { background: #fff3bf; color: #e67700; }

        .current-voice {
            font-size: 10px;
            color: #666;
            max-width: 70px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .level-btn {
            padding: 12px 10px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
            position: relative;
        }

        .level-btn.active { background: #4facfe; color: white; border-color: #4facfe; }
        .level-btn:hover { transform: translateY(-2px); }

        .level-btn .level-progress {
            position: absolute;
            bottom: 2px;
            right: 5px;
            font-size: 10px;
            opacity: 0.8;
        }

        .progress {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .sentence-display {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            min-height: 160px;
            position: relative;
        }

        .sentence-check {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 20px;
            color: #51cf66;
            display: none;
        }
        .sentence-check.show { display: block; animation: popIn 0.3s ease; }

        @keyframes popIn {
            0% { transform: scale(0); }
            50% { transform: scale(1.3); }
            100% { transform: scale(1); }
        }

        .japanese-sentence {
            font-size: 28px;
            color: #212529;
            margin-bottom: 12px;
            text-align: center;
            line-height: 1.4;
            word-break: keep-all;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .romaji { font-size: 14px; color: #6c757d; margin-bottom: 8px; text-align: center; }
        .korean-pronunciation { font-size: 15px; color: #495057; margin-bottom: 8px; text-align: center; font-weight: 500; }
        .korean-translation { font-size: 16px; color: #0066cc; text-align: center; font-weight: 600; }

        .canvas-container {
            position: relative;
            background: #ffffff;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #e0e0e0;
            overflow: hidden;
        }

        #drawingCanvas { display: block; width: 100%; height: 250px; cursor: crosshair; touch-action: none; }
        .guide-canvas { position: absolute; top: 0; left: 0; pointer-events: none; opacity: 0.3; }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 10px;
        }

        .controls-three { grid-template-columns: repeat(3, 1fr); }
        .controls-three button { padding: 12px 8px; font-size: 13px; }

        button {
            padding: 14px 10px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .btn-clear { background: #ff6b6b; color: white; }
        .btn-clear:hover { background: #ff5252; transform: translateY(-2px); }
        .btn-guide { background: #ffd43b; color: #333; }
        .btn-guide:hover { background: #fcc419; transform: translateY(-2px); }
        .btn-prev { background: #74c0fc; color: white; }
        .btn-prev:hover { background: #4dabf7; transform: translateY(-2px); }
        .btn-next { background: #51cf66; color: white; }
        .btn-next:hover { background: #40c057; transform: translateY(-2px); }
        .btn-check { background: #845ef7; color: white; }
        .btn-check:hover { background: #7950f2; transform: translateY(-2px); }
        .btn-check.checked { background: #51cf66; }

        .hint-section {
            background: #e7f5ff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .hint-title { font-size: 14px; color: #1864ab; font-weight: bold; margin-bottom: 8px; }
        .hint-content { font-size: 13px; color: #495057; line-height: 1.6; }

        /* TTS ÏÉÅÌÉú ÌëúÏãú */
        .tts-status {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 20px;
            display: none;
            animation: soundWave 0.5s ease-in-out infinite;
        }
        .tts-status.show { display: block; }
        
        @keyframes soundWave {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Î°úÎî© Ïä§ÌîºÎÑà */
        .loading-spinner {
            display: inline-block;
            width: 14px;
            height: 14px;
            border: 2px solid #fff;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 0.8s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .no-voices-msg {
            padding: 15px;
            text-align: center;
            color: #868e96;
            font-size: 12px;
        }

        @media (max-width: 500px) {
            h1 { font-size: 16px; }
            .header { gap: 6px; }
            .header-buttons { gap: 4px; }
            .back-button, .header-btn {
                width: 32px; height: 32px; font-size: 14px;
            }
        }

        @media (max-width: 400px) {
            .container { padding: 20px 15px; }
            h1 { font-size: 14px; }
            .back-button, .header-btn {
                width: 30px; height: 30px; font-size: 12px; border-radius: 6px;
            }
            .japanese-sentence { font-size: 22px; }
            .romaji { font-size: 13px; }
            .korean-pronunciation { font-size: 14px; }
            .korean-translation { font-size: 15px; }
            button { padding: 12px 8px; font-size: 14px; }
            .sentence-display { padding: 15px; }
            .hint-section { padding: 12px; }
            .hint-title { font-size: 13px; }
            .hint-content { font-size: 12px; }
            .current-voice { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-button" onclick="goBack()">‚Üê</button>
            <h1>Î¨∏Ïû• Ïó∞Ïäµ</h1>
            <div class="header-buttons">
                <!-- TTS Ïû¨ÏÉù Î≤ÑÌäº -->
                <button class="header-btn" id="playBtn" onclick="playTTS()" title="Î∞úÏùå Îì£Í∏∞">
                    <span id="playIcon">‚ñ∂</span>
                </button>
                
                <!-- ÏùåÏÑ± ÏÑ†ÌÉù ÎìúÎ°≠Îã§Ïö¥ -->
                <div class="dropdown">
                    <button class="header-btn" onclick="toggleDropdown('voiceDropdown')" title="ÏùåÏÑ± ÏÑ†ÌÉù" style="width: auto; padding: 0 10px; gap: 5px;">
                        <span>üé§</span>
                        <span class="current-voice" id="currentVoiceName">Î°úÎî©Ï§ë...</span>
                    </button>
                    <div class="dropdown-content" id="voiceDropdown">
                        <div class="no-voices-msg" id="loadingVoices">ÏùåÏÑ± Î™©Î°ù Î°úÎî©Ï§ë...</div>
                    </div>
                </div>
                
                <!-- Ìè∞Ìä∏ ÎìúÎ°≠Îã§Ïö¥ -->
                <div class="dropdown">
                    <button class="header-btn" onclick="toggleDropdown('fontDropdown')" title="Ìè∞Ìä∏ Î≥ÄÍ≤Ω">Aa</button>
                    <div class="dropdown-content" id="fontDropdown" style="min-width: 160px;">
                        <div class="dropdown-option active" onclick="setFont('Noto Sans JP')" style="font-family: 'Noto Sans JP'">Noto Sans JP</div>
                        <div class="dropdown-option" onclick="setFont('Zen Maru Gothic')" style="font-family: 'Zen Maru Gothic'">Zen Maru Gothic</div>
                        <div class="dropdown-option" onclick="setFont('Kosugi Maru')" style="font-family: 'Kosugi Maru'">Kosugi Maru</div>
                        <div class="dropdown-option" onclick="setFont('M PLUS Rounded 1c')" style="font-family: 'M PLUS Rounded 1c'">M PLUS Rounded</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="level-selector">
            <button class="level-btn active" onclick="selectLevel('beginner')">ÏûÖÎ¨∏<span class="level-progress" id="beginnerProgress"></span></button>
            <button class="level-btn" onclick="selectLevel('basic')">Ï¥àÍ∏â<span class="level-progress" id="basicProgress"></span></button>
            <button class="level-btn" onclick="selectLevel('intermediate')">Ï§ëÍ∏â<span class="level-progress" id="intermediateProgress"></span></button>
        </div>

        <div class="progress" id="progressText">1 / 50</div>

        <div class="sentence-display">
            <span class="tts-status" id="ttsStatus">üîä</span>
            <span class="sentence-check" id="sentenceCheck">‚úì</span>
            <div class="japanese-sentence jp-text" id="japaneseSentence">„Åì„Çì„Å´„Å°„ÅØ</div>
            <div class="romaji" id="romajiText">konnichiwa</div>
            <div class="korean-pronunciation" id="koreanPronunciation">ÏΩòÎãàÏπòÏôÄ</div>
            <div class="korean-translation" id="koreanTranslation">ÏïàÎÖïÌïòÏÑ∏Ïöî</div>
        </div>

        <div class="canvas-container">
            <canvas id="drawingCanvas"></canvas>
            <canvas id="guideCanvas" class="guide-canvas"></canvas>
        </div>

        <div class="controls">
            <button class="btn-prev" onclick="prevSentence()">‚óÄ Ïù¥Ï†Ñ</button>
            <button class="btn-next" onclick="nextSentence()">Îã§Ïùå ‚ñ∂</button>
        </div>
        <div class="controls controls-three">
            <button class="btn-clear" onclick="clearCanvas()">üóë ÏßÄÏö∞Í∏∞</button>
            <button class="btn-guide" onclick="toggleGuide()">üëÅ Í∞ÄÏù¥Îìú</button>
            <button class="btn-check" id="checkBtn" onclick="toggleCheck()">‚úì ÏôÑÎ£å</button>
        </div>

        <div class="hint-section">
            <div class="hint-title">üí° ÌïôÏäµ ÌûåÌä∏</div>
            <div class="hint-content" id="hintContent">ÏùºÎ≥∏Ïñ¥ Ïù∏ÏÇ¨ Ï§ë Í∞ÄÏû• Í∏∞Î≥∏Ï†ÅÏù∏ ÌëúÌòÑÏûÖÎãàÎã§.</div>
        </div>
    </div>

    <script>
        const sentences = {
            beginner: [
                {japanese:'„Åì„Çì„Å´„Å°„ÅØ',romaji:'konnichiwa',pronunciation:'ÏΩòÎãàÏπòÏôÄ',korean:'ÏïàÎÖïÌïòÏÑ∏Ïöî',hint:'Í∞ÄÏû• Í∏∞Î≥∏Ï†ÅÏù∏ Ïù∏ÏÇ¨ÎßêÏûÖÎãàÎã§.'},
                {japanese:'„ÅÇ„Çä„Åå„Å®„ÅÜ',romaji:'arigatou',pronunciation:'ÏïÑÎ¶¨Í∞ÄÎòê',korean:'Í≥†ÎßàÏõåÏöî',hint:'Í∞êÏÇ¨Î•º ÌëúÌòÑÌïòÎäî Í∏∞Î≥∏ ÌëúÌòÑÏûÖÎãàÎã§.'},
                {japanese:'„Åä„ÅØ„Çà„ÅÜ',romaji:'ohayou',pronunciation:'Ïò§ÌïòÏöî',korean:'Ï¢ãÏùÄ ÏïÑÏπ®',hint:'ÏïÑÏπ® Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åì„Çì„Å∞„Çì„ÅØ',romaji:'konbanwa',pronunciation:'ÏΩòÎ∞©ÏôÄ',korean:'ÏïàÎÖïÌïòÏÑ∏Ïöî (Ï†ÄÎÖÅ)',hint:'Ï†ÄÎÖÅ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åï„Çà„ÅÜ„Å™„Çâ',romaji:'sayounara',pronunciation:'ÏÇ¨ÏöîÎÇòÎùº',korean:'ÏïàÎÖïÌûà Í∞ÄÏÑ∏Ïöî',hint:'ÏûëÎ≥Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åä„ÇÑ„Åô„Åø',romaji:'oyasumi',pronunciation:'Ïò§ÏïºÏä§ÎØ∏',korean:'Ïûò Ïûê',hint:'Ïû†Îì§Í∏∞ Ï†Ñ ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åî„ÇÅ„Çì„Å™„Åï„ÅÑ',romaji:'gomennasai',pronunciation:'Í≥†Î©òÎÇòÏÇ¨Ïù¥',korean:'ÎØ∏ÏïàÌï¥Ïöî',hint:'ÏÇ¨Í≥ºÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„ÅØ„ÅÑ',romaji:'hai',pronunciation:'ÌïòÏù¥',korean:'ÎÑ§',hint:'Í∏çÏ†ïÏùò ÎåÄÎãµÏûÖÎãàÎã§.'},
                {japanese:'„ÅÑ„ÅÑ„Åà',romaji:'iie',pronunciation:'Ïù¥Ïù¥Ïóê',korean:'ÏïÑÎãàÏöî',hint:'Î∂ÄÏ†ïÏùò ÎåÄÎãµÏûÖÎãàÎã§.'},
                {japanese:'„Çè„Åã„Çä„Åæ„Åó„Åü',romaji:'wakarimashita',pronunciation:'ÏôÄÏπ¥Î¶¨ÎßàÏãúÌÉÄ',korean:'ÏïåÍ≤†ÏäµÎãàÎã§',hint:'Ïù¥Ìï¥ÌñàÏùåÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Å©„ÅÜ„ÅÑ„Åü„Åó„Åæ„Åó„Å¶',romaji:'douitashimashite',pronunciation:'ÎèÑ-Ïù¥ÌÉÄÏãúÎßàÏãúÌÖå',korean:'Ï≤úÎßåÏóêÏöî',hint:'Í∞êÏÇ¨Ïóê ÎåÄÌïú ÏùëÎãµÏûÖÎãàÎã§.'},
                {japanese:'„Åò„ÇÉ„ÅÇ„Å≠',romaji:'jaane',pronunciation:'Ïüà-ÎÑ§',korean:'Í∑∏Îüº ÏïàÎÖï',hint:'ÏπúÍµ¨ÏôÄ Ìó§Ïñ¥Ïßà Îïå ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åô„Åø„Åæ„Åõ„Çì',romaji:'sumimasen',pronunciation:'Ïä§ÎØ∏ÎßàÏÑº',korean:'Ïã§Î°ÄÌï©ÎãàÎã§',hint:'ÏÇ¨ÎûåÏùÑ Î∂ÄÎ•º ÎïåÎÇò ÏÇ¨Í≥ºÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åü„Å†„ÅÑ„Åæ',romaji:'tadaima',pronunciation:'ÌÉÄÎã§Ïù¥Îßà',korean:'Îã§ÎÖÄÏôîÏäµÎãàÎã§',hint:'ÏßëÏóê ÎèåÏïÑÏôîÏùÑ Îïå ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åä„Åã„Åà„Çä',romaji:'okaeri',pronunciation:'Ïò§Ïπ¥ÏóêÎ¶¨',korean:'Ïñ¥ÏÑú ÏôÄ',hint:'ÎèåÏïÑÏò® ÏÇ¨ÎûåÏùÑ ÎßûÏù¥Ìï† Îïå ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„ÅÑ„Å£„Å¶„Åç„Åæ„Åô',romaji:'ittekimasu',pronunciation:'ÏûáÌÖåÌÇ§ÎßàÏä§',korean:'Îã§ÎÖÄÏò§Í≤†ÏäµÎãàÎã§',hint:'Ïô∏Ï∂úÌï† Îïå ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„ÅÑ„Å£„Å¶„Çâ„Å£„Åó„ÇÉ„ÅÑ',romaji:'itterasshai',pronunciation:'ÏûáÌÖåÎûèÏÉ§Ïù¥',korean:'Îã§ÎÖÄÏò§ÏÑ∏Ïöî',hint:'Ïô∏Ï∂úÌïòÎäî ÏÇ¨ÎûåÏóêÍ≤å ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„ÅÑ„Åü„Å†„Åç„Åæ„Åô',romaji:'itadakimasu',pronunciation:'Ïù¥ÌÉÄÎã§ÌÇ§ÎßàÏä§',korean:'Ïûò Î®πÍ≤†ÏäµÎãàÎã§',hint:'ÏãùÏÇ¨ Ï†Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åî„Å°„Åù„ÅÜ„Åï„Åæ',romaji:'gochisousama',pronunciation:'Í≥†ÏπòÏÜå-ÏÇ¨Îßà',korean:'Ïûò Î®πÏóàÏäµÎãàÎã§',hint:'ÏãùÏÇ¨ ÌõÑ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åä„ÇÅ„Åß„Å®„ÅÜ',romaji:'omedetou',pronunciation:'Ïò§Î©îÎç∞Îòê',korean:'Ï∂ïÌïòÌï¥Ïöî',hint:'Ï∂ïÌïòÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åå„Çì„Å∞„Å£„Å¶',romaji:'ganbatte',pronunciation:'Í∞ÑÎ∞ßÌÖå',korean:'ÌûòÎÇ¥',hint:'ÏùëÏõêÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂',romaji:'daijoubu',pronunciation:'Îã§Ïù¥Ï£†-Î∂Ä',korean:'Í¥úÏ∞ÆÏïÑÏöî',hint:'Í¥úÏ∞ÆÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åô„Å¶„Åç',romaji:'suteki',pronunciation:'Ïä§ÌÖåÌÇ§',korean:'Î©ãÏ†∏Ïöî',hint:'Î©ãÏßÄÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åã„Çè„ÅÑ„ÅÑ',romaji:'kawaii',pronunciation:'Ïπ¥ÏôÄÏù¥Ïù¥',korean:'Í∑ÄÏó¨Ïõå',hint:'Í∑ÄÏóΩÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åô„Åî„ÅÑ',romaji:'sugoi',pronunciation:'Ïä§Í≥†Ïù¥',korean:'ÎåÄÎã®Ìï¥',hint:'ÎåÄÎã®ÌïòÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åü„ÅÆ„Åó„ÅÑ',romaji:'tanoshii',pronunciation:'ÌÉÄÎÖ∏ÏãúÏù¥',korean:'Ï¶êÍ±∞Ïõå',hint:'Ï¶êÍ≤ÅÎã§Îäî Í∞êÏ†ïÏûÖÎãàÎã§.'},
                {japanese:'„ÅÜ„Çå„Åó„ÅÑ',romaji:'ureshii',pronunciation:'Ïö∞Î†àÏãúÏù¥',korean:'Í∏∞Îªê',hint:'Í∏∞ÏÅòÎã§Îäî Í∞êÏ†ïÏûÖÎãàÎã§.'},
                {japanese:'„Åï„Å≥„Åó„ÅÑ',romaji:'sabishii',pronunciation:'ÏÇ¨ÎπÑÏãúÏù¥',korean:'Ïô∏Î°úÏõå',hint:'Ïô∏Î°≠Îã§Îäî Í∞êÏ†ïÏûÖÎãàÎã§.'},
                {japanese:'„Å§„Åã„Çå„Åü',romaji:'tsukareta',pronunciation:'Ï∏†Ïπ¥Î†àÌÉÄ',korean:'ÌîºÍ≥§Ìï¥',hint:'ÌîºÍ≥§ÌïòÎã§Îäî ÏÉÅÌÉúÏûÖÎãàÎã§.'},
                {japanese:'„Å≠„ÇÄ„ÅÑ',romaji:'nemui',pronunciation:'ÎÑ§Î¨¥Ïù¥',korean:'Ï°∏Î†§',hint:'Ï°∏Î¶¨Îã§Îäî ÏÉÅÌÉúÏûÖÎãàÎã§.'},
                {japanese:'„Åä„ÅÑ„Åó„ÅÑ',romaji:'oishii',pronunciation:'Ïò§Ïù¥ÏãúÏù¥',korean:'ÎßõÏûàÏñ¥',hint:'ÎßõÏûàÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åæ„Åö„ÅÑ',romaji:'mazui',pronunciation:'ÎßàÏ¶àÏù¥',korean:'ÎßõÏóÜÏñ¥',hint:'ÎßõÏóÜÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„ÅÇ„Å§„ÅÑ',romaji:'atsui',pronunciation:'ÏïÑÏ∏†Ïù¥',korean:'ÎçîÏõå/Îú®Í±∞Ïõå',hint:'Îç•Í±∞ÎÇò Îú®Í±∞Ïö∏ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åï„ÇÄ„ÅÑ',romaji:'samui',pronunciation:'ÏÇ¨Î¨¥Ïù¥',korean:'Ï∂îÏõå',hint:'Ï∂îÏö∏ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åü„Åã„ÅÑ',romaji:'takai',pronunciation:'ÌÉÄÏπ¥Ïù¥',korean:'ÎπÑÏã∏/ÎÜíÏïÑ',hint:'ÎπÑÏã∏Í±∞ÎÇò ÎÜíÏùÑ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„ÇÑ„Åô„ÅÑ',romaji:'yasui',pronunciation:'ÏïºÏä§Ïù¥',korean:'Ïã∏',hint:'Í∞ÄÍ≤©Ïù¥ ÏåÄ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åä„Åä„Åç„ÅÑ',romaji:'ookii',pronunciation:'Ïò§-ÌÇ§Ïù¥',korean:'Ïª§',hint:'ÌÅ¨Í∏∞Í∞Ä ÌÅ¥ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Å°„ÅÑ„Åï„ÅÑ',romaji:'chiisai',pronunciation:'Ïπò-ÏÇ¨Ïù¥',korean:'ÏûëÏïÑ',hint:'ÌÅ¨Í∏∞Í∞Ä ÏûëÏùÑ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„ÅÇ„Åü„Çâ„Åó„ÅÑ',romaji:'atarashii',pronunciation:'ÏïÑÌÉÄÎùºÏãúÏù¥',korean:'ÏÉàÎ°úÏõå',hint:'ÏÉàÍ≤ÉÏùº Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åµ„Çã„ÅÑ',romaji:'furui',pronunciation:'ÌõÑÎ£®Ïù¥',korean:'Ïò§ÎûòÎêêÏñ¥',hint:'Ïò§ÎûòÎêú Í≤ÉÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„ÅÑ„ÅÑ',romaji:'ii',pronunciation:'Ïù¥-',korean:'Ï¢ãÏïÑ',hint:'Ï¢ãÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Çè„Çã„ÅÑ',romaji:'warui',pronunciation:'ÏôÄÎ£®Ïù¥',korean:'ÎÇòÎπ†',hint:'ÎÇòÏÅòÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„ÇÄ„Åö„Åã„Åó„ÅÑ',romaji:'muzukashii',pronunciation:'Î¨¥Ï¶àÏπ¥ÏãúÏù¥',korean:'Ïñ¥Î†§Ïõå',hint:'Ïñ¥Î†µÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„ÇÑ„Åï„Åó„ÅÑ',romaji:'yasashii',pronunciation:'ÏïºÏÇ¨ÏãúÏù¥',korean:'Ïâ¨Ïõå/ÏπúÏ†àÌï¥',hint:'ÏâΩÍ±∞ÎÇò ÏπúÏ†àÌïòÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„ÅØ„ÇÑ„ÅÑ',romaji:'hayai',pronunciation:'ÌïòÏïºÏù¥',korean:'Îπ®Îùº',hint:'Îπ†Î•¥Îã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åä„Åù„ÅÑ',romaji:'osoi',pronunciation:'Ïò§ÏÜåÏù¥',korean:'ÎäêÎ†§',hint:'ÎäêÎ¶¨Îã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åü„Åè„Åï„Çì',romaji:'takusan',pronunciation:'ÌÉÄÏø†ÏÉÅ',korean:'ÎßéÏù¥',hint:'ÎßéÎã§Îäî ÏùòÎØ∏ÏûÖÎãàÎã§.'},
                {japanese:'„Åô„Åì„Åó',romaji:'sukoshi',pronunciation:'Ïä§ÏΩîÏãú',korean:'Ï°∞Í∏à',hint:'Ï†ÅÏùÄ ÏñëÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Å®„Å¶„ÇÇ',romaji:'totemo',pronunciation:'ÌÜ†ÌÖåÎ™®',korean:'Îß§Ïö∞',hint:'Ï†ïÎèÑÍ∞Ä Ïã¨Ìï®ÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Å°„Çá„Å£„Å®',romaji:'chotto',pronunciation:'Ï¥õÌÜ†',korean:'Ïû†Íπê',hint:'ÏßßÏùÄ ÏãúÍ∞ÑÏù¥ÎÇò Ï†ÅÏùÄ ÏñëÏûÖÎãàÎã§.'}
            ],
            basic: [
                {japanese:'„Çè„Åü„Åó„ÅØ „Åå„Åè„Åõ„ÅÑ „Åß„Åô',romaji:'watashi wa gakusei desu',pronunciation:'ÏôÄÌÉÄÏãúÏôÄ Í∞ÄÏø†ÏÑ∏-Îç∞Ïä§',korean:'Ï†ÄÎäî ÌïôÏÉùÏûÖÎãàÎã§',hint:'ÏûêÍ∏∞ÏÜåÍ∞úÏùò Í∏∞Î≥∏ Î¨∏Ïû•ÏûÖÎãàÎã§.'},
                {japanese:'„Åì„Çå„ÅØ „Åª„Çì „Åß„Åô',romaji:'kore wa hon desu',pronunciation:'ÏΩîÎ†àÏôÄ ÌòºÎç∞Ïä§',korean:'Ïù¥Í≤ÉÏùÄ Ï±ÖÏûÖÎãàÎã§',hint:'ÏÇ¨Î¨ºÏùÑ Í∞ÄÎ¶¨ÌÇ¨ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Å™„Åæ„Åà„ÅØ „Å™„Çì „Åß„Åô„Åã',romaji:'namae wa nan desuka',pronunciation:'ÎÇòÎßàÏóêÏôÄ ÎÇúÎç∞Ïä§Ïπ¥',korean:'Ïù¥Î¶ÑÏù¥ Î¨¥ÏóáÏûÖÎãàÍπå?',hint:'Ïù¥Î¶ÑÏùÑ Î¨ºÏñ¥Î≥¥Îäî ÌëúÌòÑÏûÖÎãàÎã§.'},
                {japanese:'„Åô„Åø„Åæ„Åõ„Çì',romaji:'sumimasen',pronunciation:'Ïä§ÎØ∏ÎßàÏÑº',korean:'Ï£ÑÏÜ°Ìï©ÎãàÎã§',hint:'ÏÇ¨Í≥ºÌïòÍ±∞ÎÇò Ï£ºÏùòÎ•º ÎÅå Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„ÅÑ„Åü„Å†„Åç„Åæ„Åô',romaji:'itadakimasu',pronunciation:'Ïù¥ÌÉÄÎã§ÌÇ§ÎßàÏä§',korean:'Ïûò Î®πÍ≤†ÏäµÎãàÎã§',hint:'ÏãùÏÇ¨ Ï†Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åî„Å°„Åù„ÅÜ„Åï„Åæ„Åß„Åó„Åü',romaji:'gochisousamadeshita',pronunciation:'Í≥†ÏπòÏÜå-ÏÇ¨ÎßàÎç∞ÏãúÌÉÄ',korean:'Ïûò Î®πÏóàÏäµÎãàÎã§',hint:'ÏãùÏÇ¨ ÌõÑ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Çè„Åü„Åó„ÅØ „Å´„Åª„Çì„Åò„Çì „Åß„Åô',romaji:'watashi wa nihonjin desu',pronunciation:'ÏôÄÌÉÄÏãúÏôÄ ÎãàÌòºÏßÑÎç∞Ïä§',korean:'Ï†ÄÎäî ÏùºÎ≥∏Ïù∏ÏûÖÎãàÎã§',hint:'Íµ≠Ï†ÅÏùÑ ÎßêÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åì„Çå„ÅØ „ÅÑ„Åè„Çâ „Åß„Åô„Åã',romaji:'kore wa ikura desuka',pronunciation:'ÏΩîÎ†àÏôÄ Ïù¥Ïø†ÎùºÎç∞Ïä§Ïπ¥',korean:'Ïù¥Í≤ÉÏùÄ ÏñºÎßàÏûÖÎãàÍπå?',hint:'Í∞ÄÍ≤©ÏùÑ Î¨ºÏñ¥Î≥º Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åô„Åç„Åß„Åô',romaji:'suki desu',pronunciation:'Ïä§ÌÇ§Îç∞Ïä§',korean:'Ï¢ãÏïÑÌï©ÎãàÎã§',hint:'Ï¢ãÏïÑÌïòÎäî Í≤ÉÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Çè„Åã„Çä„Åæ„Åõ„Çì',romaji:'wakarimasen',pronunciation:'ÏôÄÏπ¥Î¶¨ÎßàÏÑº',korean:'Î™®Î•¥Í≤†ÏäµÎãàÎã§',hint:'Ïù¥Ìï¥ÌïòÏßÄ Î™ªÌñàÏùÑ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Å´„Åª„Çì„Åî„Åå „ÅØ„Å™„Åõ„Åæ„Åô',romaji:'nihongo ga hanasemasu',pronunciation:'ÎãàÌòºÍ≥†Í∞Ä ÌïòÎÇòÏÑ∏ÎßàÏä§',korean:'ÏùºÎ≥∏Ïñ¥Î•º ÎßêÌï† Ïàò ÏûàÏäµÎãàÎã§',hint:'Îä•Î†•ÏùÑ ÌëúÌòÑÌïòÎäî Î¨∏Ïû•ÏûÖÎãàÎã§.'},
                {japanese:'„Éà„Ç§„É¨„ÅØ „Å©„Åì „Åß„Åô„Åã',romaji:'toire wa doko desuka',pronunciation:'ÌÜ†Ïù¥Î†àÏôÄ ÎèÑÏΩîÎç∞Ïä§Ïπ¥',korean:'ÌôîÏû•Ïã§ÏùÄ Ïñ¥ÎîîÏûÖÎãàÍπå?',hint:'ÌôîÏû•Ïã§ ÏúÑÏπòÎ•º Î¨ºÏñ¥Î¥ÖÎãàÎã§.'},
                {japanese:'„Åã„Çì„Åì„Åè„Åò„Çì „Åß„Åô',romaji:'kankokujin desu',pronunciation:'Ïπ∏ÏΩîÏø†ÏßÑÎç∞Ïä§',korean:'ÌïúÍµ≠Ïù∏ÏûÖÎãàÎã§',hint:'Íµ≠Ï†ÅÏùÑ ÎßêÌïòÎäî ÌëúÌòÑÏûÖÎãàÎã§.'},
                {japanese:'„Åì„Çå„Çí „Åè„Å†„Åï„ÅÑ',romaji:'kore wo kudasai',pronunciation:'ÏΩîÎ†àÏò§ Ïø†Îã§ÏÇ¨Ïù¥',korean:'Ïù¥Í≤ÉÏùÑ Ï£ºÏÑ∏Ïöî',hint:'Î¨ºÍ±¥ÏùÑ ÏöîÏ≤≠Ìï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'},
                {japanese:'„Åä„ÅÑ„Åó„ÅÑ „Åß„Åô',romaji:'oishii desu',pronunciation:'Ïò§Ïù¥Ïãú-Îç∞Ïä§',korean:'ÎßõÏûàÏäµÎãàÎã§',hint:'ÏùåÏãùÏù¥ ÎßõÏûàÏùÑ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'}
            ],
            intermediate: [
                {japanese:'„Åç„Çá„ÅÜ„ÅØ „ÅÑ„ÅÑ „Å¶„Çì„Åç „Åß„Åô„Å≠',romaji:'kyou wa ii tenki desune',pronunciation:'ÏøÑ-ÏôÄ Ïù¥- ÌÖêÌÇ§Îç∞Ïä§ÎÑ§',korean:'Ïò§ÎäòÏùÄ Ï¢ãÏùÄ ÎÇ†Ïî®ÎÑ§Ïöî',hint:'ÎÇ†Ïî®Ïóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞Ìï©ÎãàÎã§.'},
                {japanese:'„Å´„Åª„Çì„Åî„Çí „Åπ„Çì„Åç„Çá„ÅÜ„Åó„Å¶ „ÅÑ„Åæ„Åô',romaji:'nihongo wo benkyou shite imasu',pronunciation:'ÎãàÌòºÍ≥†Ïò§ Î≤§ÏøÑ-ÏãúÌÖåÏù¥ÎßàÏä§',korean:'ÏùºÎ≥∏Ïñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏäµÎãàÎã§',hint:'ÌòÑÏû¨ ÏßÑÌñâ Ï§ëÏù∏ ÌñâÎèôÏûÖÎãàÎã§.'},
                {japanese:'„Åà„Åç„ÅØ „Å©„Åì „Åß„Åô„Åã',romaji:'eki wa doko desuka',pronunciation:'ÏóêÌÇ§ÏôÄ ÎèÑÏΩîÎç∞Ïä§Ïπ¥',korean:'Ïó≠ÏùÄ Ïñ¥ÎîîÏûÖÎãàÍπå?',hint:'Ïû•ÏÜåÎ•º Î¨ºÏñ¥Î¥ÖÎãàÎã§.'},
                {japanese:'„Åä„Å™„Åã„Åå „Åô„Åç„Åæ„Åó„Åü',romaji:'onaka ga sukimashita',pronunciation:'Ïò§ÎÇòÏπ¥Í∞Ä Ïä§ÌÇ§ÎßàÏãúÌÉÄ',korean:'Î∞∞Í∞Ä Í≥†ÌååÏöî',hint:'Î∞∞Í≥†ÌîîÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Åæ„Åü „ÅÇ„Åó„Åü',romaji:'mata ashita',pronunciation:'ÎßàÌÉÄ ÏïÑÏãúÌÉÄ',korean:'Îòê ÎÇ¥Ïùº Î¥êÏöî',hint:'ÏπúÍ∑ºÌïú ÏûëÎ≥Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'},
                {japanese:'„Åü„ÅÆ„Åó„Åã„Å£„Åü „Åß„Åô',romaji:'tanoshikatta desu',pronunciation:'ÌÉÄÎÖ∏ÏãúÏ∫áÌÉÄÎç∞Ïä§',korean:'Ï¶êÍ±∞Ïõ†ÏäµÎãàÎã§',hint:'Í≥ºÍ±∞Ïùò Ï¶êÍ±∞Ïõ†Îçò Í≤ΩÌóòÏûÖÎãàÎã§.'},
                {japanese:'„Å¶„Å§„Å†„Å£„Å¶ „Åè„Å†„Åï„ÅÑ',romaji:'tetsudatte kudasai',pronunciation:'ÌÖåÏ∏†Îã∑ÌÖå Ïø†Îã§ÏÇ¨Ïù¥',korean:'ÎèÑÏôÄÏ£ºÏÑ∏Ïöî',hint:'ÎèÑÏõÄÏùÑ ÏöîÏ≤≠Ìï©ÎãàÎã§.'},
                {japanese:'„ÇÜ„Å£„Åè„Çä „ÅØ„Å™„Åó„Å¶ „Åè„Å†„Åï„ÅÑ',romaji:'yukkuri hanashite kudasai',pronunciation:'Ïú≥Ïø†Î¶¨ ÌïòÎÇòÏãúÌÖå Ïø†Îã§ÏÇ¨Ïù¥',korean:'Ï≤úÏ≤úÌûà ÎßêÌï¥ Ï£ºÏÑ∏Ïöî',hint:'Ï≤úÏ≤úÌûà ÎßêÌï¥Îã¨ÎùºÍ≥† Î∂ÄÌÉÅÌï©ÎãàÎã§.'},
                {japanese:'„Å´„Åª„Çì„Å´ „ÅÑ„Åç„Åü„ÅÑ „Åß„Åô',romaji:'nihon ni ikitai desu',pronunciation:'ÎãàÌòºÎãà Ïù¥ÌÇ§ÌÉÄÏù¥Îç∞Ïä§',korean:'ÏùºÎ≥∏Ïóê Í∞ÄÍ≥† Ïã∂ÏäµÎãàÎã§',hint:'Ìù¨ÎßùÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„Åà„ÅÑ„Åå„Çí „Åø„Å´ „ÅÑ„Åç„Åæ„Åô',romaji:'eiga wo mi ni ikimasu',pronunciation:'Ïóê-Í∞ÄÏò§ ÎØ∏Îãà Ïù¥ÌÇ§ÎßàÏä§',korean:'ÏòÅÌôîÎ•º Î≥¥Îü¨ Í∞ëÎãàÎã§',hint:'Î™©Ï†ÅÏùÑ Í∞ÄÏßÑ Ïù¥ÎèôÏûÖÎãàÎã§.'},
                {japanese:'„Åó„ÇÖ„ÅÜ„Åæ„Å§„ÅØ „Å™„Å´„Çí „Åó„Åæ„Åô„Åã',romaji:'shuumatsu wa nani wo shimasuka',pronunciation:'Ïäà-ÎßàÏ∏†ÏôÄ ÎÇòÎãàÏò§ ÏãúÎßàÏä§Ïπ¥',korean:'Ï£ºÎßêÏóê Î¨¥ÏóáÏùÑ Ìï©ÎãàÍπå?',hint:'Í≥ÑÌöçÏùÑ Î¨ºÏñ¥Î¥ÖÎãàÎã§.'},
                {japanese:'„Å®„Å¶„ÇÇ „Åç„Çå„ÅÑ „Åß„Åô',romaji:'totemo kirei desu',pronunciation:'ÌÜ†ÌÖåÎ™® ÌÇ§Î†àÏù¥Îç∞Ïä§',korean:'Îß§Ïö∞ ÏòàÏÅ©ÎãàÎã§',hint:'ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'},
                {japanese:'„ÅÇ„Åó„Åü„ÅØ „ÇÑ„Åô„Åø „Åß„Åô',romaji:'ashita wa yasumi desu',pronunciation:'ÏïÑÏãúÌÉÄÏôÄ ÏïºÏä§ÎØ∏Îç∞Ïä§',korean:'ÎÇ¥ÏùºÏùÄ Ïâ¨Îäî ÎÇ†ÏûÖÎãàÎã§',hint:'Ìú¥ÏùºÏùÑ ÎßêÌï©ÎãàÎã§.'},
                {japanese:'„ÇÇ„ÅÜ „ÅÑ„Å°„Å© „ÅÑ„Å£„Å¶ „Åè„Å†„Åï„ÅÑ',romaji:'mou ichido itte kudasai',pronunciation:'Î™®- Ïù¥ÏπòÎèÑ ÏûáÌÖå Ïø†Îã§ÏÇ¨Ïù¥',korean:'Ìïú Î≤à Îçî ÎßêÌï¥ Ï£ºÏÑ∏Ïöî',hint:'Îã§Ïãú ÎßêÌï¥Îã¨ÎùºÍ≥† Î∂ÄÌÉÅÌï©ÎãàÎã§.'},
                {japanese:'„Åß„Çì„Çè„Å∞„Çì„Åî„ÅÜ„Çí „Åä„Åó„Åà„Å¶ „Åè„Å†„Åï„ÅÑ',romaji:'denwabangou wo oshiete kudasai',pronunciation:'Îç¥ÏôÄÎ∞©Í≥†-Ïò§ Ïò§ÏãúÏóêÌÖå Ïø†Îã§ÏÇ¨Ïù¥',korean:'Ï†ÑÌôîÎ≤àÌò∏Î•º ÏïåÎ†§Ï£ºÏÑ∏Ïöî',hint:'Ïó∞ÎùΩÏ≤òÎ•º Î¨ºÏñ¥Î¥ÖÎãàÎã§.'}
            ]
        };

        // VOICEVOX ÏùåÏÑ± Î™©Î°ù
        const voicevoxVoices = [
            { id: 3, name: '„Åö„Çì„Å†„ÇÇ„Çì', category: 'female' },
            { id: 1, name: 'ÂõõÂõΩ„ÇÅ„Åü„Çì', category: 'female' },
            { id: 22, name: 'Êò•Êó•ÈÉ®„Å§„ÇÄ„Åé', category: 'female' },
            { id: 10, name: 'Èõ®Êô¥„ÅØ„ÅÜ', category: 'female' },
            { id: 14, name: 'ÂÜ•È≥¥„Å≤„Åæ„Çä', category: 'female' },
            { id: 9, name: 'Ê≥¢Èü≥„É™„ÉÑ', category: 'female' },
            { id: 13, name: 'ÈùíÂ±±ÈæçÊòü', category: 'male' },
            { id: 11, name: 'ÁéÑÈáéÊ≠¶ÂÆè', category: 'male' },
            { id: 52, name: 'Ââ£Â¥éÈõåÈõÑ', category: 'male' },
            { id: 4, name: '„Åö„Çì„Å†„ÇÇ„Çì (Îã¨ÏΩ§)', category: 'special' },
            { id: 6, name: '„Åö„Çì„Å†„ÇÇ„Çì (ÏÑπÏãú)', category: 'special' },
            { id: 5, name: '„Åö„Çì„Å†„ÇÇ„Çì (Ï∏§Ï∏§)', category: 'special' },
            { id: 21, name: '„Åö„Çì„Å†„ÇÇ„Çì (ÏÜçÏÇ≠ÏûÑ)', category: 'special' },
        ];

        let currentLevel = 'beginner';
        let currentIndex = 0;
        let isDrawing = false;
        let showGuide = true;
        let currentFont = 'Noto Sans JP';
        let checkedSentences = JSON.parse(localStorage.getItem('sentenceChecked') || '{}');
        let isPlaying = false;
        let currentAudio = null;
        
        // ÏùåÏÑ± ÏÑ§Ï†ï
        let selectedVoice = null; // { type: 'webspeech' | 'voicevox', id: ... }
        let webSpeechVoices = [];

        const canvas = document.getElementById('drawingCanvas');
        const guideCanvas = document.getElementById('guideCanvas');
        const ctx = canvas.getContext('2d');
        const guideCtx = guideCanvas.getContext('2d');

        // Web Speech API ÏùåÏÑ± Î°úÎìú
        function loadWebSpeechVoices() {
            return new Promise((resolve) => {
                let voices = speechSynthesis.getVoices();
                if (voices.length > 0) {
                    resolve(voices);
                    return;
                }
                
                speechSynthesis.onvoiceschanged = () => {
                    voices = speechSynthesis.getVoices();
                    resolve(voices);
                };
                
                // ÌÉÄÏûÑÏïÑÏõÉ (ÏùºÎ∂Ä Î∏åÎùºÏö∞Ï†ÄÏóêÏÑú Ïù¥Î≤§Ìä∏Í∞Ä Î∞úÏÉùÌïòÏßÄ ÏïäÏùÑ Ïàò ÏûàÏùå)
                setTimeout(() => resolve(speechSynthesis.getVoices()), 1000);
            });
        }

        // ÏùåÏÑ± Î™©Î°ù UI Íµ¨ÏÑ±
        async function populateVoiceList() {
            const dropdown = document.getElementById('voiceDropdown');
            const allVoices = await loadWebSpeechVoices();
            
            // ÏùºÎ≥∏Ïñ¥ ÏùåÏÑ±Îßå ÌïÑÌÑ∞ÎßÅ
            webSpeechVoices = allVoices.filter(v => v.lang.startsWith('ja'));
            
            let html = '';
            
            // VOICEVOX ÏùåÏÑ± (ÌÅ¥ÎùºÏö∞Îìú)
            html += '<div class="voice-category">üé≠ VOICEVOX (Í≥†ÌíàÏßà)</div>';
            
            const femaleVV = voicevoxVoices.filter(v => v.category === 'female');
            const maleVV = voicevoxVoices.filter(v => v.category === 'male');
            const specialVV = voicevoxVoices.filter(v => v.category === 'special');
            
            [...femaleVV, ...maleVV, ...specialVV].forEach(voice => {
                const icon = voice.category === 'female' ? 'üë©' : voice.category === 'male' ? 'üë®' : '‚ú®';
                html += `<div class="dropdown-option" data-type="voicevox" data-id="${voice.id}" onclick="selectVoice('voicevox', ${voice.id}, '${voice.name}')">
                    ${icon} ${voice.name}
                    <span class="voice-badge voicevox">VOICEVOX</span>
                </div>`;
            });
            
            // Web Speech API ÏùåÏÑ±
            if (webSpeechVoices.length > 0) {
                html += '<div class="voice-category">üåê Î∏åÎùºÏö∞Ï†Ä ÏùåÏÑ±</div>';
                
                webSpeechVoices.forEach((voice, index) => {
                    const isLocal = voice.localService;
                    const displayName = voice.name.replace('Google ', '').replace('Microsoft ', '').replace(' Online (Natural)', '');
                    const badgeClass = isLocal ? 'local' : 'cloud';
                    const badgeText = isLocal ? 'Î°úÏª¨' : 'ÌÅ¥ÎùºÏö∞Îìú';
                    
                    html += `<div class="dropdown-option" data-type="webspeech" data-id="${index}" onclick="selectVoice('webspeech', ${index}, '${displayName}')">
                        üîä ${displayName}
                        <span class="voice-badge ${badgeClass}">${badgeText}</span>
                    </div>`;
                });
            }
            
            if (html === '') {
                html = '<div class="no-voices-msg">ÏÇ¨Ïö© Í∞ÄÎä•Ìïú ÏùåÏÑ±Ïù¥ ÏóÜÏäµÎãàÎã§</div>';
            }
            
            dropdown.innerHTML = html;
            
            // Ï†ÄÏû•Îêú ÏùåÏÑ± ÏÑ§Ï†ï Î≥µÏõê ÎòêÎäî Í∏∞Î≥∏Í∞í ÏÑ§Ï†ï
            const savedVoice = localStorage.getItem('selectedVoice');
            if (savedVoice) {
                try {
                    selectedVoice = JSON.parse(savedVoice);
                    document.getElementById('currentVoiceName').textContent = selectedVoice.name;
                    updateActiveVoice();
                } catch (e) {
                    setDefaultVoice();
                }
            } else {
                setDefaultVoice();
            }
        }

        function setDefaultVoice() {
            // Í∏∞Î≥∏Í∞í: VOICEVOX „Åö„Çì„Å†„ÇÇ„Çì
            selectedVoice = { type: 'voicevox', id: 3, name: '„Åö„Çì„Å†„ÇÇ„Çì' };
            document.getElementById('currentVoiceName').textContent = selectedVoice.name;
            localStorage.setItem('selectedVoice', JSON.stringify(selectedVoice));
            updateActiveVoice();
        }

        function updateActiveVoice() {
            document.querySelectorAll('#voiceDropdown .dropdown-option').forEach(opt => {
                const type = opt.dataset.type;
                const id = parseInt(opt.dataset.id);
                opt.classList.toggle('active', type === selectedVoice.type && id === selectedVoice.id);
            });
        }

        function selectVoice(type, id, name) {
            selectedVoice = { type, id, name };
            document.getElementById('currentVoiceName').textContent = name;
            localStorage.setItem('selectedVoice', JSON.stringify(selectedVoice));
            updateActiveVoice();
            document.getElementById('voiceDropdown').classList.remove('show');
        }

        function toggleDropdown(id) {
            document.querySelectorAll('.dropdown-content').forEach(d => {
                if (d.id !== id) d.classList.remove('show');
            });
            document.getElementById(id).classList.toggle('show');
        }

        async function playTTS() {
            // Ïù¥ÎØ∏ Ïû¨ÏÉù Ï§ëÏù¥Î©¥ Ï§ëÏßÄ
            if (isPlaying) {
                stopCurrentAudio();
                return;
            }

            const sentence = sentences[currentLevel][currentIndex];
            const text = sentence.japanese.replace(/\s/g, '');
            
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            playBtn.disabled = true;
            playIcon.innerHTML = '<span class="loading-spinner"></span>';
            
            try {
                if (selectedVoice.type === 'voicevox') {
                    await playVoicevox(text, selectedVoice.id);
                } else {
                    playWebSpeech(text, selectedVoice.id);
                }
            } catch (error) {
                console.error('TTS Ïò§Î•ò:', error);
                // VOICEVOX Ïã§Ìå® Ïãú Web SpeechÎ°ú Ìè¥Î∞±
                if (selectedVoice.type === 'voicevox' && webSpeechVoices.length > 0) {
                    playWebSpeech(text, 0);
                }
            } finally {
                playBtn.disabled = false;
                if (!isPlaying) {
                    playIcon.textContent = '‚ñ∂';
                }
            }
        }

        async function playVoicevox(text, speakerId) {
            const apiUrl = `https://api.tts.quest/v3/voicevox/synthesis?speaker=${speakerId}&text=${encodeURIComponent(text)}`;
            const response = await fetch(apiUrl);
            const data = await response.json();
            
            if (data.success && data.mp3StreamingUrl) {
                currentAudio = new Audio(data.mp3StreamingUrl);
                
                currentAudio.onplay = () => {
                    isPlaying = true;
                    updatePlayButton(true);
                    updateTtsStatus(true);
                };
                
                currentAudio.onended = () => {
                    isPlaying = false;
                    currentAudio = null;
                    updatePlayButton(false);
                    updateTtsStatus(false);
                };
                
                currentAudio.onerror = () => {
                    isPlaying = false;
                    currentAudio = null;
                    updatePlayButton(false);
                    updateTtsStatus(false);
                };
                
                await currentAudio.play();
            } else {
                throw new Error('VOICEVOX API ÏùëÎãµ Ïò§Î•ò');
            }
        }

        function playWebSpeech(text, voiceIndex) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ja-JP';
            utterance.rate = 0.9;
            
            if (webSpeechVoices[voiceIndex]) {
                utterance.voice = webSpeechVoices[voiceIndex];
            }
            
            utterance.onstart = () => {
                isPlaying = true;
                updatePlayButton(true);
                updateTtsStatus(true);
            };
            
            utterance.onend = () => {
                isPlaying = false;
                updatePlayButton(false);
                updateTtsStatus(false);
            };
            
            utterance.onerror = () => {
                isPlaying = false;
                updatePlayButton(false);
                updateTtsStatus(false);
            };
            
            speechSynthesis.speak(utterance);
        }

        function updatePlayButton(playing) {
            const playBtn = document.getElementById('playBtn');
            const playIcon = document.getElementById('playIcon');
            
            if (playing) {
                playBtn.classList.add('playing');
                playIcon.textContent = '‚èπ';
            } else {
                playBtn.classList.remove('playing');
                playIcon.textContent = '‚ñ∂';
            }
        }

        function updateTtsStatus(playing) {
            const ttsStatus = document.getElementById('ttsStatus');
            ttsStatus.classList.toggle('show', playing);
        }

        function stopCurrentAudio() {
            if (currentAudio) {
                currentAudio.pause();
                currentAudio = null;
            }
            speechSynthesis.cancel();
            isPlaying = false;
            updatePlayButton(false);
            updateTtsStatus(false);
        }

        function setFont(fontName) {
            currentFont = fontName;
            document.documentElement.style.setProperty('--jp-font', `'${fontName}', sans-serif`);
            document.querySelectorAll('#fontDropdown .dropdown-option').forEach(opt => {
                opt.classList.toggle('active', opt.textContent.trim() === fontName);
            });
            document.getElementById('fontDropdown').classList.remove('show');
            localStorage.setItem('sentenceFont', fontName);
            drawGuideSentence();
        }

        document.addEventListener('click', function(e) {
            if (!e.target.closest('.dropdown')) {
                document.querySelectorAll('.dropdown-content').forEach(d => d.classList.remove('show'));
            }
        });

        function getSentenceKey() {
            return `${currentLevel}-${currentIndex}`;
        }

        function toggleCheck() {
            const key = getSentenceKey();
            if (checkedSentences[key]) {
                delete checkedSentences[key];
            } else {
                checkedSentences[key] = true;
            }
            localStorage.setItem('sentenceChecked', JSON.stringify(checkedSentences));
            updateCheckDisplay();
            updateLevelProgress();
        }

        function updateCheckDisplay() {
            const key = getSentenceKey();
            const isChecked = checkedSentences[key];
            const checkMark = document.getElementById('sentenceCheck');
            const checkBtn = document.getElementById('checkBtn');
            
            if (isChecked) {
                checkMark.classList.add('show');
                checkBtn.classList.add('checked');
                checkBtn.textContent = '‚úì ÏôÑÎ£åÎê®';
            } else {
                checkMark.classList.remove('show');
                checkBtn.classList.remove('checked');
                checkBtn.textContent = '‚úì ÏôÑÎ£å';
            }
        }

        function updateLevelProgress() {
            ['beginner', 'basic', 'intermediate'].forEach(level => {
                const total = sentences[level].length;
                let checked = 0;
                for (let i = 0; i < total; i++) {
                    if (checkedSentences[`${level}-${i}`]) checked++;
                }
                const el = document.getElementById(`${level}Progress`);
                if (el) el.textContent = checked > 0 ? `${checked}/${total}` : '';
            });
        }

        function initCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            
            canvas.width = rect.width;
            canvas.height = 250;
            guideCanvas.width = rect.width;
            guideCanvas.height = 250;

            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#4facfe';

            drawGuideSentence();
        }

        function drawGuideSentence() {
            const sentence = sentences[currentLevel][currentIndex];
            guideCtx.clearRect(0, 0, guideCanvas.width, guideCanvas.height);
            
            const noSpace = sentence.japanese.replace(/\s/g, '');
            const totalChars = noSpace.length;
            let lines = [];
            
            if (totalChars <= 6) {
                lines = [sentence.japanese];
            } else if (totalChars <= 12) {
                const firstLineChars = Math.ceil(totalChars / 2);
                let currentLine = '';
                let charCount = 0;
                
                for (let i = 0; i < sentence.japanese.length; i++) {
                    const char = sentence.japanese[i];
                    if (char === ' ') {
                        currentLine += char;
                    } else {
                        if (charCount === firstLineChars) {
                            lines.push(currentLine.trim());
                            currentLine = '';
                        }
                        currentLine += char;
                        charCount++;
                    }
                }
                if (currentLine.trim()) lines.push(currentLine.trim());
            } else {
                const charsPerLine = Math.ceil(totalChars / 3);
                let currentLine = '';
                let charCount = 0;
                let lineCount = 0;
                
                for (let i = 0; i < sentence.japanese.length; i++) {
                    const char = sentence.japanese[i];
                    if (char === ' ') {
                        currentLine += char;
                    } else {
                        if (charCount > 0 && charCount % charsPerLine === 0 && lineCount < 2) {
                            lines.push(currentLine.trim());
                            currentLine = '';
                            lineCount++;
                        }
                        currentLine += char;
                        charCount++;
                    }
                }
                if (currentLine.trim()) lines.push(currentLine.trim());
            }
            
            let fontSize = 100;
            guideCtx.font = `bold ${fontSize}px '${currentFont}', sans-serif`;
            const longestLine = lines.reduce((a, b) => a.length > b.length ? a : b);
            let textWidth = guideCtx.measureText(longestLine).width;
            
            const targetWidth = guideCanvas.width * 0.9;
            fontSize = fontSize * (targetWidth / textWidth);
            
            const lineHeight = fontSize * 1.3;
            const totalHeight = lineHeight * lines.length;
            const maxHeight = guideCanvas.height * 0.85;
            if (totalHeight > maxHeight) {
                fontSize = fontSize * (maxHeight / totalHeight);
            }
            
            guideCtx.font = `bold ${fontSize}px '${currentFont}', sans-serif`;
            guideCtx.fillStyle = '#00f2fe';
            guideCtx.textAlign = 'center';
            guideCtx.textBaseline = 'middle';
            
            const actualLineHeight = fontSize * 1.3;
            const startY = guideCanvas.height / 2 - (actualLineHeight * (lines.length - 1)) / 2;
            
            lines.forEach((line, index) => {
                guideCtx.fillText(line, guideCanvas.width / 2, startY + index * actualLineHeight);
            });
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return { x: touch.clientX - rect.left, y: touch.clientY - rect.top };
        }

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDrawing() { isDrawing = false; }
        function clearCanvas() { ctx.clearRect(0, 0, canvas.width, canvas.height); }
        function toggleGuide() { showGuide = !showGuide; guideCanvas.style.opacity = showGuide ? '0.3' : '0'; }

        function nextSentence() {
            stopCurrentAudio();
            const levelData = sentences[currentLevel];
            currentIndex = (currentIndex + 1) % levelData.length;
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function prevSentence() {
            stopCurrentAudio();
            const levelData = sentences[currentLevel];
            currentIndex = (currentIndex - 1 + levelData.length) % levelData.length;
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function selectLevel(level) {
            stopCurrentAudio();
            currentLevel = level;
            currentIndex = 0;
            document.querySelectorAll('.level-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function updateDisplay() {
            const sentence = sentences[currentLevel][currentIndex];
            const japaneseEl = document.getElementById('japaneseSentence');
            
            const noSpace = sentence.japanese.replace(/\s/g, '');
            const charCount = noSpace.length;
            let fontSize;
            
            if (charCount <= 5) fontSize = 32;
            else if (charCount <= 8) fontSize = 28;
            else if (charCount <= 12) fontSize = 26;
            else if (charCount <= 16) fontSize = 24;
            else fontSize = 22;
            
            japaneseEl.style.fontSize = fontSize + 'px';
            japaneseEl.textContent = sentence.japanese;
            
            document.getElementById('romajiText').textContent = sentence.romaji;
            document.getElementById('koreanPronunciation').textContent = sentence.pronunciation;
            document.getElementById('koreanTranslation').textContent = sentence.korean;
            document.getElementById('hintContent').textContent = sentence.hint;
            document.getElementById('progressText').textContent = 
                `${currentIndex + 1} / ${sentences[currentLevel].length}`;
            
            updateCheckDisplay();
        }

        function goBack() { window.location.href = 'index.html'; }

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
        document.addEventListener('keydown', function(e) {
            switch(e.key) {
                case 'ArrowLeft': e.preventDefault(); prevSentence(); break;
                case 'ArrowRight': e.preventDefault(); nextSentence(); break;
                case ' ': e.preventDefault(); clearCanvas(); break;
                case 'Enter': e.preventDefault(); toggleCheck(); break;
                case 'g': case 'G': toggleGuide(); break;
                case 'p': case 'P': playTTS(); break;
            }
        });

        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        window.addEventListener('resize', initCanvas);
        
        // Ï¥àÍ∏∞Ìôî
        async function init() {
            // Ìè∞Ìä∏ ÏÑ§Ï†ï Î≥µÏõê
            const savedFont = localStorage.getItem('sentenceFont');
            if (savedFont) {
                currentFont = savedFont;
                document.documentElement.style.setProperty('--jp-font', `'${savedFont}', sans-serif`);
                document.querySelectorAll('#fontDropdown .dropdown-option').forEach(opt => {
                    opt.classList.toggle('active', opt.textContent.trim() === savedFont);
                });
            }
            
            // ÏùåÏÑ± Î™©Î°ù Î°úÎìú
            await populateVoiceList();
            
            // Chrome Î≤ÑÍ∑∏ Ìï¥Í≤∞: Îπà Î¨∏ÏûêÏó¥Î°ú Ï¥àÍ∏∞Ìôî
            speechSynthesis.speak(new SpeechSynthesisUtterance(''));
            
            initCanvas();
            updateDisplay();
            updateLevelProgress();
        }
        
        init();
    </script>
</body>
</html>
