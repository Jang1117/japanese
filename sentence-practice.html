<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÏùºÎ≥∏Ïñ¥ Î¨∏Ïû• Ïó∞Ïäµ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            padding: 30px;
            max-width: 600px;
            width: 100%;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            gap: 10px;
        }

        .back-button {
            background: #e9ecef;
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.3s;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .back-button:hover {
            background: #dee2e6;
            transform: translateX(-3px);
        }

        h1 {
            color: #4facfe;
            font-size: 22px;
            flex: 1;
            white-space: nowrap;
        }

        .level-selector {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .level-btn {
            padding: 12px 10px;
            background: #e9ecef;
            color: #495057;
            border: 2px solid transparent;
            border-radius: 10px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .level-btn.active {
            background: #4facfe;
            color: white;
            border-color: #4facfe;
        }

        .level-btn:hover {
            transform: translateY(-2px);
        }

        .progress {
            text-align: center;
            color: #666;
            font-size: 14px;
            margin-bottom: 10px;
        }

        .sentence-display {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .japanese-sentence {
            font-size: 28px;
            color: #212529;
            margin-bottom: 12px;
            text-align: center;
            line-height: 1.5;
            word-break: keep-all;
        }

        .romaji {
            font-size: 14px;
            color: #6c757d;
            margin-bottom: 8px;
            text-align: center;
        }

        .korean-pronunciation {
            font-size: 15px;
            color: #495057;
            margin-bottom: 8px;
            text-align: center;
            font-weight: 500;
        }

        .korean-translation {
            font-size: 16px;
            color: #0066cc;
            text-align: center;
            font-weight: 600;
        }

        .canvas-container {
            position: relative;
            background: #ffffff;
            border-radius: 15px;
            margin-bottom: 20px;
            border: 3px solid #e0e0e0;
            overflow: hidden;
        }

        #drawingCanvas {
            display: block;
            width: 100%;
            height: 250px;
            cursor: crosshair;
            touch-action: none;
        }

        .guide-canvas {
            position: absolute;
            top: 0;
            left: 0;
            pointer-events: none;
            opacity: 0;
        }

        .controls {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            padding: 14px 10px;
            border: none;
            border-radius: 10px;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }

        .btn-clear {
            background: #ff6b6b;
            color: white;
        }

        .btn-clear:hover {
            background: #ff5252;
            transform: translateY(-2px);
        }

        .btn-guide {
            background: #ffd43b;
            color: #333;
        }

        .btn-guide:hover {
            background: #fcc419;
            transform: translateY(-2px);
        }

        .btn-prev {
            background: #74c0fc;
            color: white;
        }

        .btn-prev:hover {
            background: #4dabf7;
            transform: translateY(-2px);
        }

        .btn-next {
            background: #51cf66;
            color: white;
        }

        .btn-next:hover {
            background: #40c057;
            transform: translateY(-2px);
        }

        .hint-section {
            background: #e7f5ff;
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
        }

        .hint-title {
            font-size: 14px;
            color: #1864ab;
            font-weight: bold;
            margin-bottom: 8px;
        }

        .hint-content {
            font-size: 13px;
            color: #495057;
            line-height: 1.6;
        }

        @media (max-width: 400px) {
            .container {
                padding: 20px 15px;
            }
            
            h1 {
                font-size: 18px;
            }
            
            .japanese-sentence {
                font-size: 22px;
            }
            
            .romaji {
                font-size: 13px;
            }
            
            .korean-pronunciation {
                font-size: 14px;
            }
            
            .korean-translation {
                font-size: 15px;
            }
            
            button {
                padding: 12px 8px;
                font-size: 14px;
            }
            
            .sentence-display {
                padding: 15px;
            }
            
            .hint-section {
                padding: 12px;
            }
            
            .hint-title {
                font-size: 13px;
            }
            
            .hint-content {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="back-button" onclick="goBack()">‚Üê</button>
            <h1>üìù ÏùºÎ≥∏Ïñ¥ Î¨∏Ïû• Ïó∞Ïäµ</h1>
        </div>

        <div class="level-selector">
            <button class="level-btn active" onclick="selectLevel('beginner')">Ï¥àÍ∏â</button>
            <button class="level-btn" onclick="selectLevel('intermediate')">Ï§ëÍ∏â</button>
        </div>

        <div class="progress" id="progressText">1 / 15</div>

        <div class="sentence-display">
            <div class="japanese-sentence" id="japaneseSentence">„Åì„Çì„Å´„Å°„ÅØ</div>
            <div class="romaji" id="romajiText">konnichiwa</div>
            <div class="korean-pronunciation" id="koreanPronunciation">ÏΩòÎãàÏπòÏôÄ</div>
            <div class="korean-translation" id="koreanTranslation">ÏïàÎÖïÌïòÏÑ∏Ïöî</div>
        </div>

        <div class="canvas-container">
            <canvas id="drawingCanvas"></canvas>
            <canvas id="guideCanvas" class="guide-canvas"></canvas>
        </div>

        <div class="controls">
            <button class="btn-prev" onclick="prevSentence()">‚óÄ Ïù¥Ï†Ñ</button>
            <button class="btn-next" onclick="nextSentence()">Îã§Ïùå ‚ñ∂</button>
            <button class="btn-clear" onclick="clearCanvas()">üóë ÏßÄÏö∞Í∏∞</button>
            <button class="btn-guide" onclick="toggleGuide()">üëÅ Í∞ÄÏù¥Îìú</button>
        </div>

        <div class="hint-section">
            <div class="hint-title">üí° ÌïôÏäµ ÌûåÌä∏</div>
            <div class="hint-content" id="hintContent">ÏùºÎ≥∏Ïñ¥ Ïù∏ÏÇ¨ Ï§ë Í∞ÄÏû• Í∏∞Î≥∏Ï†ÅÏù∏ ÌëúÌòÑÏûÖÎãàÎã§.</div>
        </div>
    </div>

    <script>
        const sentences = {
            beginner: [
                {
                    japanese: '„Åì„Çì„Å´„Å°„ÅØ',
                    romaji: 'konnichiwa',
                    pronunciation: 'ÏΩòÎãàÏπòÏôÄ',
                    korean: 'ÏïàÎÖïÌïòÏÑ∏Ïöî',
                    hint: 'ÏùºÎ≥∏Ïñ¥ Ïù∏ÏÇ¨ Ï§ë Í∞ÄÏû• Í∏∞Î≥∏Ï†ÅÏù∏ ÌëúÌòÑÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åä„ÅØ„Çà„ÅÜ',
                    romaji: 'ohayou',
                    pronunciation: 'Ïò§ÌïòÏöî-',
                    korean: 'Ï¢ãÏùÄ ÏïÑÏπ®Ïù¥ÏóêÏöî',
                    hint: 'ÏïÑÏπ® Ïù∏ÏÇ¨ÏûÖÎãàÎã§. ÏπúÍµ¨ÎÇò Í∞ÄÏ°±ÏóêÍ≤å ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åì„Çì„Å∞„Çì„ÅØ',
                    romaji: 'konbanwa',
                    pronunciation: 'ÏΩ§Î∞òÏôÄ',
                    korean: 'ÏïàÎÖïÌïòÏÑ∏Ïöî (Ï†ÄÎÖÅ)',
                    hint: 'Ï†ÄÎÖÅ ÏãúÍ∞ÑÎåÄÏóê ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„ÅÇ„Çä„Åå„Å®„ÅÜ',
                    romaji: 'arigatou',
                    pronunciation: 'ÏïÑÎ¶¨Í∞ÄÎòê-',
                    korean: 'Í≥†ÎßàÏõåÏöî',
                    hint: 'Í∞êÏÇ¨Î•º ÌëúÌòÑÌïòÎäî Í∏∞Î≥∏ ÌëúÌòÑÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åô„Åø„Åæ„Åõ„Çì',
                    romaji: 'sumimasen',
                    pronunciation: 'Ïä§ÎØ∏ÎßàÏÖç',
                    korean: 'Ïã§Î°ÄÌï©ÎãàÎã§ / Ï£ÑÏÜ°Ìï©ÎãàÎã§',
                    hint: 'ÏÇ¨Í≥ºÎÇò Ï£ºÏùòÎ•º ÎÅå Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„ÅØ„ÅÑ',
                    romaji: 'hai',
                    pronunciation: 'ÌïòÏù¥',
                    korean: 'ÎÑ§',
                    hint: 'Í∏çÏ†ïÏùò ÎåÄÎãµÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„ÅÑ„ÅÑ„Åà',
                    romaji: 'iie',
                    pronunciation: 'Ïù¥-Ïóê',
                    korean: 'ÏïÑÎãàÏöî',
                    hint: 'Î∂ÄÏ†ïÏùò ÎåÄÎãµÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åï„Çà„ÅÜ„Å™„Çâ',
                    romaji: 'sayounara',
                    pronunciation: 'ÏÇ¨Ïöî-ÎÇòÎùº',
                    korean: 'ÏïàÎÖïÌûà Í∞ÄÏÑ∏Ïöî',
                    hint: 'ÏûëÎ≥Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åä„ÇÑ„Åô„Åø',
                    romaji: 'oyasumi',
                    pronunciation: 'Ïò§ÏïºÏä§ÎØ∏',
                    korean: 'Ïûò ÏûêÏöî',
                    hint: 'Î∞§Ïóê ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„ÅÑ„Åü„Å†„Åç„Åæ„Åô',
                    romaji: 'itadakimasu',
                    pronunciation: 'Ïù¥ÌÉÄÎã§ÌÇ§ÎßàÏä§',
                    korean: 'Ïûò Î®πÍ≤†ÏäµÎãàÎã§',
                    hint: 'ÏãùÏÇ¨ Ï†ÑÏóê ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åî„Å°„Åù„ÅÜ„Åï„Åæ',
                    romaji: 'gochisousama',
                    pronunciation: 'Í≥†ÏπòÏÜå-ÏÇ¨Îßà',
                    korean: 'Ïûò Î®πÏóàÏäµÎãàÎã§',
                    hint: 'ÏãùÏÇ¨ ÌõÑÏóê ÌïòÎäî Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åä„Å≠„Åå„ÅÑ„Åó„Åæ„Åô',
                    romaji: 'onegaishimasu',
                    pronunciation: 'Ïò§ÎÑ§Í∞ÄÏù¥ÏãúÎßàÏä§',
                    korean: 'Î∂ÄÌÉÅÎìúÎ¶ΩÎãàÎã§',
                    hint: 'Î∂ÄÌÉÅÌï† Îïå ÏÇ¨Ïö©ÌïòÎäî ÌëúÌòÑÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Å†„ÅÑ„Åò„Çá„ÅÜ„Å∂',
                    romaji: 'daijoubu',
                    pronunciation: 'Îã§Ïù¥Ï£†-Î∂Ä',
                    korean: 'Í¥úÏ∞ÆÏïÑÏöî',
                    hint: 'ÏÉÅÌÉúÍ∞Ä Í¥úÏ∞ÆÏùåÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'
                },
                {
                    japanese: '„Çè„Åã„Çä„Åæ„Åó„Åü',
                    romaji: 'wakarimashita',
                    pronunciation: 'ÏôÄÏπ¥Î¶¨ÎßàÏãúÌÉÄ',
                    korean: 'ÏïåÍ≤†ÏäµÎãàÎã§',
                    hint: 'Ïù¥Ìï¥ÌñàÏùåÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åä„ÅÑ„Åó„ÅÑ „Åß„Åô',
                    romaji: 'oishii desu',
                    pronunciation: 'Ïò§Ïù¥Ïãú-Îç∞Ïä§',
                    korean: 'ÎßõÏûàÏäµÎãàÎã§',
                    hint: 'ÏùåÏãùÏù¥ ÎßõÏûàÏùÑ Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                }
            ],
            intermediate: [
                {
                    japanese: '„Åç„Çá„ÅÜ„ÅØ „ÅÑ„ÅÑ „Å¶„Çì„Åç „Åß„Åô„Å≠',
                    romaji: 'kyou wa ii tenki desune',
                    pronunciation: 'ÏøÑ-ÏôÄ Ïù¥- ÌÖêÌÇ§Îç∞Ïä§ÎÑ§',
                    korean: 'Ïò§ÎäòÏùÄ Ï¢ãÏùÄ ÎÇ†Ïî®ÎÑ§Ïöî',
                    hint: 'ÎÇ†Ïî®Ïóê ÎåÄÌï¥ Ïù¥ÏïºÍ∏∞Ìï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„Å´„Åª„Çì„Åî„Çí „Åπ„Çì„Åç„Çá„ÅÜ„Åó„Å¶ „ÅÑ„Åæ„Åô',
                    romaji: 'nihongo wo benkyou shite imasu',
                    pronunciation: 'ÎãàÌòºÍ≥†Ïò§ Î≤§ÏøÑ-ÏãúÌÖåÏù¥ÎßàÏä§',
                    korean: 'ÏùºÎ≥∏Ïñ¥Î•º Í≥µÎ∂ÄÌïòÍ≥† ÏûàÏäµÎãàÎã§',
                    hint: 'ÌòÑÏû¨ ÏßÑÌñâ Ï§ëÏù∏ ÌñâÎèôÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åà„Åç„ÅØ „Å©„Åì „Åß„Åô„Åã',
                    romaji: 'eki wa doko desuka',
                    pronunciation: 'ÏóêÌÇ§ÏôÄ ÎèÑÏΩîÎç∞Ïä§Ïπ¥',
                    korean: 'Ïó≠ÏùÄ Ïñ¥ÎîîÏûÖÎãàÍπå?',
                    hint: 'Ïû•ÏÜåÎ•º Î¨ºÏñ¥Î≥º Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åä„Å™„Åã„Åå „Åô„Åç„Åæ„Åó„Åü',
                    romaji: 'onaka ga sukimashita',
                    pronunciation: 'Ïò§ÎÇòÏπ¥Í∞Ä Ïä§ÌÇ§ÎßàÏãúÌÉÄ',
                    korean: 'Î∞∞Í∞Ä Í≥†ÌååÏöî',
                    hint: 'Î∞∞Í≥†ÌîîÏùÑ ÌëúÌòÑÌïòÎäî Î¨∏Ïû•ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åæ„Åü „ÅÇ„Åó„Åü',
                    romaji: 'mata ashita',
                    pronunciation: 'ÎßàÌÉÄ ÏïÑÏãúÌÉÄ',
                    korean: 'Îòê ÎÇ¥Ïùº Î¥êÏöî',
                    hint: 'ÏπúÍ∑ºÌïú ÏûëÎ≥Ñ Ïù∏ÏÇ¨ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åü„ÅÆ„Åó„Åã„Å£„Åü „Åß„Åô',
                    romaji: 'tanoshikatta desu',
                    pronunciation: 'ÌÉÄÎÖ∏ÏãúÏ∫áÌÉÄÎç∞Ïä§',
                    korean: 'Ï¶êÍ±∞Ïõ†ÏäµÎãàÎã§',
                    hint: 'Í≥ºÍ±∞Ïùò Ï¶êÍ±∞Ïõ†Îçò Í≤ΩÌóòÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'
                },
                {
                    japanese: '„Å¶„Å§„Å†„Å£„Å¶ „Åè„Å†„Åï„ÅÑ',
                    romaji: 'tetsudatte kudasai',
                    pronunciation: 'ÌÖåÏ∏†Îã∑ÌÖå Ïø†Îã§ÏÇ¨Ïù¥',
                    korean: 'ÎèÑÏôÄÏ£ºÏÑ∏Ïöî',
                    hint: 'ÎèÑÏõÄÏùÑ ÏöîÏ≤≠Ìï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„ÇÜ„Å£„Åè„Çä „ÅØ„Å™„Åó„Å¶ „Åè„Å†„Åï„ÅÑ',
                    romaji: 'yukkuri hanashite kudasai',
                    pronunciation: 'Ïú≥Ïø†Î¶¨ ÌïòÎÇòÏãúÌÖå Ïø†Îã§ÏÇ¨Ïù¥',
                    korean: 'Ï≤úÏ≤úÌûà ÎßêÌï¥ Ï£ºÏÑ∏Ïöî',
                    hint: 'Ï≤úÏ≤úÌûà ÎßêÌï¥Îã¨ÎùºÍ≥† Î∂ÄÌÉÅÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„Å´„Åª„Çì„Å´ „ÅÑ„Åç„Åü„ÅÑ „Åß„Åô',
                    romaji: 'nihon ni ikitai desu',
                    pronunciation: 'ÎãàÌòºÎãà Ïù¥ÌÇ§ÌÉÄÏù¥Îç∞Ïä§',
                    korean: 'ÏùºÎ≥∏Ïóê Í∞ÄÍ≥† Ïã∂ÏäµÎãàÎã§',
                    hint: 'Ìù¨ÎßùÏùÑ ÌëúÌòÑÌïòÎäî Î¨∏Ïû•ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Åà„ÅÑ„Åå„Çí „Åø„Å´ „ÅÑ„Åç„Åæ„Åô',
                    romaji: 'eiga wo mi ni ikimasu',
                    pronunciation: 'Ïóê-Í∞ÄÏò§ ÎØ∏Îãà Ïù¥ÌÇ§ÎßàÏä§',
                    korean: 'ÏòÅÌôîÎ•º Î≥¥Îü¨ Í∞ëÎãàÎã§',
                    hint: 'Î™©Ï†ÅÏùÑ Í∞ÄÏßÑ Ïù¥ÎèôÏùÑ ÌëúÌòÑÌï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åó„ÇÖ„ÅÜ„Åæ„Å§„ÅØ „Å™„Å´„Çí „Åó„Åæ„Åô„Åã',
                    romaji: 'shuumatsu wa nani wo shimasuka',
                    pronunciation: 'Ïäà-ÎßàÏ∏†ÏôÄ ÎÇòÎãàÏò§ ÏãúÎßàÏä§Ïπ¥',
                    korean: 'Ï£ºÎßêÏóê Î¨¥ÏóáÏùÑ Ìï©ÎãàÍπå?',
                    hint: 'Í≥ÑÌöçÏùÑ Î¨ºÏñ¥Î≥¥Îäî ÌëúÌòÑÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„Å®„Å¶„ÇÇ „Åç„Çå„ÅÑ „Åß„Åô',
                    romaji: 'totemo kirei desu',
                    pronunciation: 'ÌÜ†ÌÖåÎ™® ÌÇ§Î†àÏù¥Îç∞Ïä§',
                    korean: 'Îß§Ïö∞ ÏòàÏÅ©ÎãàÎã§',
                    hint: 'ÏïÑÎ¶ÑÎã§ÏõÄÏùÑ ÌëúÌòÑÌïòÎäî Î¨∏Ïû•ÏûÖÎãàÎã§.'
                },
                {
                    japanese: '„ÅÇ„Åó„Åü„ÅØ „ÇÑ„Åô„Åø „Åß„Åô',
                    romaji: 'ashita wa yasumi desu',
                    pronunciation: 'ÏïÑÏãúÌÉÄÏôÄ ÏïºÏä§ÎØ∏Îç∞Ïä§',
                    korean: 'ÎÇ¥ÏùºÏùÄ Ïâ¨Îäî ÎÇ†ÏûÖÎãàÎã§',
                    hint: 'Ìú¥ÏùºÏùÑ ÎßêÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„ÇÇ„ÅÜ „ÅÑ„Å°„Å© „ÅÑ„Å£„Å¶ „Åè„Å†„Åï„ÅÑ',
                    romaji: 'mou ichido itte kudasai',
                    pronunciation: 'Î™®- Ïù¥ÏπòÎèÑ ÏûáÌÖå Ïø†Îã§ÏÇ¨Ïù¥',
                    korean: 'Ìïú Î≤à Îçî ÎßêÌï¥ Ï£ºÏÑ∏Ïöî',
                    hint: 'Îã§Ïãú ÎßêÌï¥Îã¨ÎùºÍ≥† Î∂ÄÌÉÅÌï† Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                },
                {
                    japanese: '„Åß„Çì„Çè„Å∞„Çì„Åî„ÅÜ„Çí „Åä„Åó„Åà„Å¶ „Åè„Å†„Åï„ÅÑ',
                    romaji: 'denwabangou wo oshiete kudasai',
                    pronunciation: 'Îç¥ÏôÄÎ∞©Í≥†-Ïò§ Ïò§ÏãúÏóêÌÖå Ïø†Îã§ÏÇ¨Ïù¥',
                    korean: 'Ï†ÑÌôîÎ≤àÌò∏Î•º ÏïåÎ†§Ï£ºÏÑ∏Ïöî',
                    hint: 'Ïó∞ÎùΩÏ≤òÎ•º Î¨ºÏñ¥Î≥º Îïå ÏÇ¨Ïö©Ìï©ÎãàÎã§.'
                }
            ]
        };

        let currentLevel = 'beginner';
        let currentIndex = 0;
        let isDrawing = false;
        let showGuide = false;

        const canvas = document.getElementById('drawingCanvas');
        const guideCanvas = document.getElementById('guideCanvas');
        const ctx = canvas.getContext('2d');
        const guideCtx = guideCanvas.getContext('2d');

        function initCanvas() {
            const container = canvas.parentElement;
            const rect = container.getBoundingClientRect();
            
            canvas.width = rect.width;
            canvas.height = 250;
            guideCanvas.width = rect.width;
            guideCanvas.height = 250;

            ctx.lineWidth = 3;
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            ctx.strokeStyle = '#4facfe';

            drawGuideSentence();
        }

        function drawGuideSentence() {
            const sentence = sentences[currentLevel][currentIndex];
            guideCtx.clearRect(0, 0, guideCanvas.width, guideCanvas.height);
            
            // Start with a large font size and measure
            let fontSize = 100;
            guideCtx.font = `bold ${fontSize}px sans-serif`;
            let textWidth = guideCtx.measureText(sentence.japanese).width;
            
            // Adjust font size to fit 90% of canvas width
            const targetWidth = guideCanvas.width * 0.9;
            fontSize = fontSize * (targetWidth / textWidth);
            
            // Limit maximum font size to 80% of canvas height
            const maxFontSize = guideCanvas.height * 0.8;
            fontSize = Math.min(fontSize, maxFontSize);
            
            guideCtx.font = `bold ${fontSize}px sans-serif`;
            guideCtx.fillStyle = '#00f2fe';
            guideCtx.textAlign = 'center';
            guideCtx.textBaseline = 'middle';
            guideCtx.fillText(sentence.japanese, guideCanvas.width / 2, guideCanvas.height / 2);
        }

        function getPos(e) {
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches ? e.touches[0] : e;
            return {
                x: touch.clientX - rect.left,
                y: touch.clientY - rect.top
            };
        }

        function startDrawing(e) {
            e.preventDefault();
            isDrawing = true;
            const pos = getPos(e);
            ctx.beginPath();
            ctx.moveTo(pos.x, pos.y);
        }

        function draw(e) {
            if (!isDrawing) return;
            e.preventDefault();
            const pos = getPos(e);
            ctx.lineTo(pos.x, pos.y);
            ctx.stroke();
        }

        function stopDrawing() {
            isDrawing = false;
        }

        function clearCanvas() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
        }

        function toggleGuide() {
            showGuide = !showGuide;
            guideCanvas.style.opacity = showGuide ? '0.3' : '0';
        }

        function nextSentence() {
            const levelData = sentences[currentLevel];
            currentIndex = (currentIndex + 1) % levelData.length;
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function prevSentence() {
            const levelData = sentences[currentLevel];
            currentIndex = (currentIndex - 1 + levelData.length) % levelData.length;
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function selectLevel(level) {
            currentLevel = level;
            currentIndex = 0;
            
            document.querySelectorAll('.level-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            updateDisplay();
            clearCanvas();
            drawGuideSentence();
        }

        function updateDisplay() {
            const sentence = sentences[currentLevel][currentIndex];
            document.getElementById('japaneseSentence').textContent = sentence.japanese;
            document.getElementById('romajiText').textContent = sentence.romaji;
            document.getElementById('koreanPronunciation').textContent = sentence.pronunciation;
            document.getElementById('koreanTranslation').textContent = sentence.korean;
            document.getElementById('hintContent').textContent = sentence.hint;
            document.getElementById('progressText').textContent = 
                `${currentIndex + 1} / ${sentences[currentLevel].length}`;
        }

        function goBack() {
            window.location.href = 'index.html';
        }

        // Event listeners
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);

        canvas.addEventListener('touchstart', startDrawing);
        canvas.addEventListener('touchmove', draw);
        canvas.addEventListener('touchend', stopDrawing);

        window.addEventListener('resize', initCanvas);
        
        initCanvas();
        updateDisplay();
    </script>
</body>
</html>
